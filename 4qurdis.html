<!DOCTYPE html>
<html lang="id" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Pembelajaran Interaktif - Al-Quran Hadits Kelas 4 MI</title>
    <link rel="icon" type="image/png" href="https://openclipart.org/image/2000px/221028">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f766e 0%, #065f46 30%, #1e40af 70%, #7c3aed 100%);
            background-attachment: fixed;
            position: relative;
            min-height: 100vh;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(255,255,255,0.08) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(255,255,255,0.06) 0%, transparent 40%);
            z-index: -1;
            pointer-events: none;
        }
        
        .arabic-text {
            font-family: 'Amiri', serif;
            font-size: 1.2em;
            line-height: 1.8;
        }
        
        .arabic-large {
            font-family: 'Amiri', serif;
            font-size: 2em;
            line-height: 2;
        }
        
        .latin-text {
            font-family: 'Arial', sans-serif;
            direction: ltr;
        }
        
        .indo-text {
            font-family: 'Arial', sans-serif;
            direction: ltr;
        }
        
        .islamic-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.06'%3E%3Cpath d='M40 40c0-15.464-12.536-28-28-28s-28 12.536-28 28 12.536 28 28 28 28-12.536 28-28zm0 0c0 15.464 12.536 28 28 28s28-12.536 28-28-12.536-28-28-28-28 12.536-28 28z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .menu-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }
        
        .menu-card:hover {
            transform: translateY(-10px) rotateX(5deg);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        
        .submenu-card {
            transition: all 0.3s ease;
        }
        
        .submenu-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        
        .bounce-in {
            animation: bounceIn 0.8s ease;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 40px rgba(59, 130, 246, 0.8); }
        }
        
        .star-twinkle {
            animation: starTwinkle 1.5s infinite;
        }
        
        @keyframes starTwinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        .audio-wave {
            animation: audioWave 1s infinite;
        }
        
        @keyframes audioWave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }
        
        .verse-highlight {
            background: linear-gradient(120deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%);
            border-left: 4px solid #3b82f6;
            transition: all 0.3s ease;
        }
        
        .verse-highlight:hover {
            background: linear-gradient(120deg, rgba(59, 130, 246, 0.2) 0%, rgba(147, 51, 234, 0.2) 100%);
            transform: translateX(5px);
        }
        
        .game-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .game-button:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-2px);
        }
        
        .evaluation-progress {
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            transition: width 0.5s ease;
        }
        
        .swal2-popup {
            font-family: 'Amiri', serif !important;
        }
        
        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <header class="bg-gradient-to-r from-emerald-900 via-teal-800 to-blue-900 shadow-2xl p-6 islamic-pattern">
        <div class="container mx-auto">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center space-x-4">
                    <div class="w-16 h-16 bg-gradient-to-br from-white to-gray-100 rounded-full flex items-center justify-center shadow-xl border-3 border-white border-opacity-50 pulse-glow">
                        <img src="https://openclipart.org/image/2000px/221028" alt="Logo" class="w-10 h-10">
                    </div>
                    <div class="text-left indo-text">
                        <p class="text-sm text-emerald-200">Media Pembelajaran Interaktif</p>
                        <h1 class="text-4xl font-bold text-white">Al-Qur'an Hadits</h1>
                        <p class="text-lg text-emerald-100">Kelas 4 MI</p>
                    </div>
                </div>
                <div class="text-center">
                    <div class="flex items-center space-x-2 mb-2">
                        <div class="bg-yellow-400 px-4 py-2 rounded-full shadow-lg">
                            <span class="text-yellow-900 font-bold">Poin: <span id="totalPoints">0</span></span>
                        </div>
                        <div id="stars" class="flex space-x-1"></div>
                        <button onclick="clearStudentData()" class="bg-red-500 text-white px-3 py-1 rounded-full text-xs hover:bg-red-600 transition-colors" title="Reset Data">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="text-white text-sm opacity-75">
                        <i class="fas fa-user-graduate mr-1"></i>
                        <span id="studentName">Siswa Rajin</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Student Profile & Progress Section -->
    <div id="studentProfileSection" class="hidden bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200 p-4">
        <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Student Info -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-user-circle mr-2 text-blue-600"></i>
                        Profil Siswa
                    </h3>
                    <div class="space-y-2">
                        <p><span class="font-semibold">Nama:</span> <span id="profileName">-</span></p>
                        <p><span class="font-semibold">Kelas:</span> <span id="profileClass">-</span></p>
                        <p><span class="font-semibold">Sekolah:</span> <span id="profileSchool">-</span></p>
                        <p><span class="font-semibold">Bergabung:</span> <span id="joinDate">-</span></p>
                        <p><span class="font-semibold">Akses Terakhir:</span> <span id="lastAccess">-</span></p>
                    </div>
                </div>

                <!-- Learning Progress -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-chart-line mr-2 text-green-600"></i>
                        Progress Belajar
                    </h3>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>Materi Dipelajari</span>
                                <span id="materiProgress">0/7</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="materiProgressBar" class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span>Evaluasi Selesai</span>
                                <span id="evaluasiProgress">0/7</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="evaluasiProgressBar" class="bg-green-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Achievements -->
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-trophy mr-2 text-yellow-600"></i>
                        Pencapaian
                    </h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600" id="totalScore">0</div>
                            <div class="text-xs text-gray-600">Total Poin</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" id="averageScore">0%</div>
                            <div class="text-xs text-gray-600">Rata-rata Nilai</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600" id="completedTests">0</div>
                            <div class="text-xs text-gray-600">Tes Selesai</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-600" id="studyStreak">0</div>
                            <div class="text-xs text-gray-600">Hari Berturut</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container mx-auto p-6">
        <!-- Main Menu -->
        <div id="mainMenu" class="fade-in">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-white mb-4 bounce-in indo-text">Pilih Materi Pembelajaran</h2>
                <p class="text-xl text-emerald-100 arabic-text" dir="rtl">اختر الموضوع الذي تريد تعلمه</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Menu 1: Hukum Izhar dan Ikhfa' -->
                <div class="menu-card bg-gradient-to-br from-white to-blue-50 rounded-3xl p-8 shadow-2xl cursor-pointer border-3 border-blue-200" onclick="showSubMenu('tajweed')">
                    <div class="text-center">
                        <div class="text-6xl mb-6 text-blue-600">
                            <i class="fas fa-book-quran"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-blue-800 mb-3 arabic-text" dir="rtl">أحكام الإظهار والإخفاء</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 indo-text">Hukum Izhar dan Ikhfa'</p>
                        <div class="text-sm text-gray-600 arabic-text" dir="rtl">تعلم أحكام التجويد الأساسية</div>
                        <div class="mt-4 flex justify-center space-x-2">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-semibold">تجويد</span>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold">أساسي</span>
                        </div>
                    </div>
                </div>

                <!-- Menu 2: Surah al-Ashr -->
                <div class="menu-card bg-gradient-to-br from-white to-green-50 rounded-3xl p-8 shadow-2xl cursor-pointer border-3 border-green-200" onclick="showSubMenu('alashr')">
                    <div class="text-center">
                        <div class="text-6xl mb-6 text-green-600">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-green-800 mb-3 arabic-text" dir="rtl">سورة العصر</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 indo-text">Surah Al-Ashr</p>
                        <div class="text-sm text-gray-600 arabic-text" dir="rtl">سورة مكية - 3 آيات</div>
                        <div class="mt-4 flex justify-center space-x-2">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold">مكية</span>
                            <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold">قصيرة</span>
                        </div>
                    </div>
                </div>

                <!-- Menu 3: Surah Quraisy -->
                <div class="menu-card bg-gradient-to-br from-white to-purple-50 rounded-3xl p-8 shadow-2xl cursor-pointer border-3 border-purple-200" onclick="showSubMenu('quraisy')">
                    <div class="text-center">
                        <div class="text-6xl mb-6 text-purple-600">
                            <i class="fas fa-kaaba"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-purple-800 mb-3 arabic-text" dir="rtl">سورة قريش</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 indo-text">Surah Quraisy</p>
                        <div class="text-sm text-gray-600 arabic-text" dir="rtl">سورة مكية - 4 آيات</div>
                        <div class="mt-4 flex justify-center space-x-2">
                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">مكية</span>
                            <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">قصيرة</span>
                        </div>
                    </div>
                </div>

                <!-- Menu 4: Surah al-Ma'un -->
                <div class="menu-card bg-gradient-to-br from-white to-orange-50 rounded-3xl p-8 shadow-2xl cursor-pointer border-3 border-orange-200" onclick="showSubMenu('maun')">
                    <div class="text-center">
                        <div class="text-6xl mb-6 text-orange-600">
                            <i class="fas fa-hands-helping"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-orange-800 mb-3 arabic-text" dir="rtl">سورة الماعون</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 indo-text">Surah Al-Ma'un</p>
                        <div class="text-sm text-gray-600 arabic-text" dir="rtl">سورة مكية - 7 آيات</div>
                        <div class="mt-4 flex justify-center space-x-2">
                            <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">مكية</span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">أخلاق</span>
                        </div>
                    </div>
                </div>

                <!-- Menu 5: Surah at-Takatsur -->
                <div class="menu-card bg-gradient-to-br from-white to-red-50 rounded-3xl p-8 shadow-2xl cursor-pointer border-3 border-red-200" onclick="showSubMenu('takatsur')">
                    <div class="text-center">
                        <div class="text-6xl mb-6 text-red-600">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-red-800 mb-3 arabic-text" dir="rtl">سورة التكاثر</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 indo-text">Surah At-Takatsur</p>
                        <div class="text-sm text-gray-600 arabic-text" dir="rtl">سورة مكية - 8 آيات</div>
                        <div class="mt-4 flex justify-center space-x-2">
                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">مكية</span>
                            <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">تحذير</span>
                        </div>
                    </div>
                </div>

                <!-- Menu 6: Hadis tentang Takwa -->
                <div class="menu-card bg-gradient-to-br from-white to-teal-50 rounded-3xl p-8 shadow-2xl cursor-pointer border-3 border-teal-200" onclick="showSubMenu('hadis_takwa')">
                    <div class="text-center">
                        <div class="text-6xl mb-6 text-teal-600">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-teal-800 mb-3 arabic-text" dir="rtl">حديث عن التقوى</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 indo-text">Hadis tentang Takwa</p>
                        <div class="text-sm text-gray-600 arabic-text" dir="rtl">أحاديث نبوية شريفة</div>
                        <div class="mt-4 flex justify-center space-x-2">
                            <span class="bg-teal-100 text-teal-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">حديث</span>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold arabic-text" dir="rtl">أخلاق</span>
                        </div>
                    </div>
                </div>

                <!-- Menu 7: Hadis tentang Niat -->
                <div class="menu-card bg-gradient-to-br from-white to-indigo-50 rounded-3xl p-8 shadow-2xl cursor-pointer border-3 border-indigo-200" onclick="showSubMenu('hadis_niat')">
                    <div class="text-center">
                        <div class="text-6xl mb-6 text-indigo-600">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-indigo-800 mb-3 arabic-text" dir="rtl">حديث عن النية</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 indo-text">Hadis tentang Niat</p>
                        <div class="text-sm text-gray-600 arabic-text" dir="rtl">أحاديث نبوية شريفة</div>
                        <div class="mt-4 flex justify-center space-x-2">
                            <span class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-xs font-semibold">حديث</span>
                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-semibold">نية</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sub Menu -->
        <div id="subMenu" class="hidden fade-in">
            <div class="flex items-center mb-8">
                <button onclick="showMainMenu()" class="bg-white bg-opacity-20 backdrop-blur-sm text-white w-12 h-12 rounded-full shadow-lg hover:bg-opacity-30 transition-all border border-white border-opacity-30 flex items-center justify-center">
                    <i class="fas fa-home text-xl"></i>
                </button>
                <h2 id="subMenuTitle" class="text-3xl font-bold text-white mx-auto arabic-text"></h2>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Materi Pembelajaran -->
                <div class="submenu-card bg-gradient-to-br from-white to-blue-50 rounded-2xl p-8 shadow-xl cursor-pointer border-2 border-blue-200" onclick="showContent('materi')">
                    <div class="text-center">
                        <div class="text-5xl mb-6 text-blue-600">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-blue-800 mb-3 indo-text">Materi Pembelajaran</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 arabic-text" dir="rtl">مواد التعلم</p>
                        <div class="text-sm text-gray-600 mb-4 indo-text">Pelajari materi dengan audio dan penjelasan lengkap</div>
                        <div class="flex justify-center space-x-2">
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-volume-up mr-1"></i> Audio
                            </span>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-book mr-1"></i> Materi
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Game Edukasi -->
                <div class="submenu-card bg-gradient-to-br from-white to-purple-50 rounded-2xl p-8 shadow-xl cursor-pointer border-2 border-purple-200" onclick="showContent('game')">
                    <div class="text-center">
                        <div class="text-5xl mb-6 text-purple-600">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-purple-800 mb-3 indo-text">Game Edukasi</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 arabic-text" dir="rtl">الألعاب التعليمية</p>
                        <div class="text-sm text-gray-600 mb-4 indo-text">Bermain sambil belajar dengan game interaktif</div>
                        <div class="flex justify-center space-x-2">
                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-semibold indo-text">
                                <i class="fas fa-trophy mr-1"></i> Skor
                            </span>
                            <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold indo-text">
                                <i class="fas fa-star mr-1"></i> Poin
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Evaluasi -->
                <div class="submenu-card bg-gradient-to-br from-white to-green-50 rounded-2xl p-8 shadow-xl cursor-pointer border-2 border-green-200" onclick="showContent('evaluasi')">
                    <div class="text-center">
                        <div class="text-5xl mb-6 text-green-600">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-green-800 mb-3 indo-text">Evaluasi</h3>
                        <p class="text-lg text-gray-700 font-semibold mb-2 arabic-text" dir="rtl">التقييم</p>
                        <div class="text-sm text-gray-600 mb-4 indo-text">Uji pemahaman dengan soal-soal interaktif</div>
                        <div class="flex justify-center space-x-2">
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-question-circle mr-1"></i> Quiz
                            </span>
                            <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-chart-line mr-1"></i> Nilai
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div id="contentArea" class="hidden fade-in">
            <div class="flex items-center mb-8">
                <button onclick="showSubMenu(currentTopic)" class="bg-white bg-opacity-20 backdrop-blur-sm text-white w-12 h-12 rounded-full shadow-lg hover:bg-opacity-30 transition-all border border-white border-opacity-30 flex items-center justify-center">
                    <i class="fas fa-arrow-left text-xl"></i>
                </button>
                <h2 id="contentTitle" class="text-3xl font-bold text-white mx-auto arabic-text"></h2>
            </div>
            
            <div id="contentBody" class="bg-white rounded-3xl p-8 shadow-2xl border border-gray-200">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-emerald-900 via-teal-800 to-blue-900 text-white py-8 mt-16 islamic-pattern">
        <div class="container mx-auto text-center">
            <div class="flex items-center justify-center mb-4">
                <div class="w-12 h-12 bg-gradient-to-br from-white to-gray-100 rounded-full flex items-center justify-center shadow-xl border border-white border-opacity-50 mr-4">
                    <img src="https://cdn-icons-png.flaticon.com/512/9960/9960119.png" alt="Logo" class="w-8 h-8">
                </div>
                <div class="indo-text">
                    <h3 class="text-xl font-bold">Al-Qur'an Hadits</h3>
                    <p class="text-sm text-emerald-200">Kelas 4 MI</p>
                </div>
            </div>
            <div class="text-emerald-100 text-sm mb-3 indo-text">
                Media Pembelajaran Interaktif Al-Qur'an Hadits untuk Siswa Kelas 4 MI
            </div>
            <div class="text-emerald-200 text-xs mb-2">
                <span class="indo-text">© 2025 Emes Media Creativa</span>
            </div>
            <div class="text-emerald-300 text-xs">
                <span class="indo-text">Made with ❤️ for Islamic Education</span>
            </div>
        </div>
    </footer>

    <script>
        let currentTopic = '';
        let currentContent = '';
        let totalPoints = 0;
        let stars = 0;
        let currentAudio = null;
        let isPlaying = false;

        // Student data management with localStorage
        let studentData = {
            name: '',
            class: '',
            school: '',
            joinDate: '',
            materiCompleted: [],
            evaluasiCompleted: [],
            totalTests: 0,
            totalScore: 0,
            studyStreak: 0
        };

        // LocalStorage functions
        function loadStudentData() {
            const saved = localStorage.getItem('alquran_hadits_student_data');
            if (saved) {
                try {
                    const parsedData = JSON.parse(saved);
                    studentData = { ...studentData, ...parsedData };
                    totalPoints = studentData.totalPoints || 0;
                    stars = Math.floor(totalPoints / 100);
                    updateStudentProfile();
                    updateStars();
                    
                    if (studentData.name) {
                        showStudentProfile();
                    }
                    return true;
                } catch (e) {
                    console.log('Error loading student data:', e);
                }
            }
            return false;
        }

        function saveStudentData() {
            try {
                const dataToSave = {
                    ...studentData,
                    totalPoints: totalPoints,
                    lastAccess: new Date().toLocaleString('id-ID')
                };
                localStorage.setItem('alquran_hadits_student_data', JSON.stringify(dataToSave));
            } catch (e) {
                console.log('Error saving student data:', e);
            }
        }

        function updateStudentProgress(topic, type) {
            if (type === 'materi' && !studentData.materiCompleted.includes(topic)) {
                studentData.materiCompleted.push(topic);
                Swal.fire({
                    title: 'Progress Tersimpan!',
                    text: `Materi ${topic} telah selesai dipelajari`,
                    icon: 'success',
                    timer: 2000,
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false
                });
            } else if (type === 'evaluasi' && !studentData.evaluasiCompleted.includes(topic)) {
                studentData.evaluasiCompleted.push(topic);
                studentData.totalTests++;
                Swal.fire({
                    title: 'Evaluasi Selesai!',
                    text: `Evaluasi ${topic} telah diselesaikan`,
                    icon: 'success',
                    timer: 2000,
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false
                });
            }
            saveStudentData();
            updateStudentProfile();
        }

        function clearStudentData() {
            Swal.fire({
                title: 'Hapus Semua Data?',
                text: 'Semua progress, poin, dan data siswa akan dihapus permanen!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Ya, Hapus Semua',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#d33',
                reverseButtons: true
            }).then((result) => {
                if (result.isConfirmed) {
                    localStorage.removeItem('alquran_hadits_student_data');
                    Swal.fire({
                        title: 'Data Terhapus!',
                        text: 'Halaman akan dimuat ulang...',
                        icon: 'success',
                        timer: 2000,
                        showConfirmButton: false
                    }).then(() => {
                        location.reload();
                    });
                }
            });
        }

        // Audio templates for each surah (to be filled with actual audio links)
        const audioTemplates = {
            alashr: {
                full: "AUDIO_LINK_SURAH_ALASHR_FULL", // Replace with actual audio link
                verses: [
                    "AUDIO_LINK_ALASHR_VERSE_1", // Replace with actual audio link
                    "AUDIO_LINK_ALASHR_VERSE_2", // Replace with actual audio link
                    "AUDIO_LINK_ALASHR_VERSE_3"  // Replace with actual audio link
                ]
            },
            quraisy: {
                full: "AUDIO_LINK_SURAH_QURAISY_FULL",
                verses: [
                    "AUDIO_LINK_QURAISY_VERSE_1",
                    "AUDIO_LINK_QURAISY_VERSE_2",
                    "AUDIO_LINK_QURAISY_VERSE_3",
                    "AUDIO_LINK_QURAISY_VERSE_4"
                ]
            },
            maun: {
                full: "AUDIO_LINK_SURAH_MAUN_FULL",
                verses: [
                    "AUDIO_LINK_MAUN_VERSE_1",
                    "AUDIO_LINK_MAUN_VERSE_2",
                    "AUDIO_LINK_MAUN_VERSE_3",
                    "AUDIO_LINK_MAUN_VERSE_4",
                    "AUDIO_LINK_MAUN_VERSE_5",
                    "AUDIO_LINK_MAUN_VERSE_6",
                    "AUDIO_LINK_MAUN_VERSE_7"
                ]
            },
            takatsur: {
                full: "AUDIO_LINK_SURAH_TAKATSUR_FULL",
                verses: [
                    "AUDIO_LINK_TAKATSUR_VERSE_1",
                    "AUDIO_LINK_TAKATSUR_VERSE_2",
                    "AUDIO_LINK_TAKATSUR_VERSE_3",
                    "AUDIO_LINK_TAKATSUR_VERSE_4",
                    "AUDIO_LINK_TAKATSUR_VERSE_5",
                    "AUDIO_LINK_TAKATSUR_VERSE_6",
                    "AUDIO_LINK_TAKATSUR_VERSE_7",
                    "AUDIO_LINK_TAKATSUR_VERSE_8"
                ]
            }
        };

        // Surah data
        const surahData = {
            alashr: {
                name: "سورة العصر",
                nameIndo: "Surah Al-Ashr",
                meaning: "Masa/Waktu",
                type: "مكية",
                verses: 3,
                content: [
                    {
                        arabic: "وَالْعَصْرِ",
                        latin: "Wal 'ashr",
                        translation: "Demi masa"
                    },
                    {
                        arabic: "إِنَّ الْإِنسَانَ لَفِي خُسْرٍ",
                        latin: "Innal insaana lafii khusr",
                        translation: "Sesungguhnya manusia itu benar-benar dalam kerugian"
                    },
                    {
                        arabic: "إِلَّا الَّذِينَ آمَنُوا وَعَمِلُوا الصَّالِحَاتِ وَتَوَاصَوْا بِالْحَقِّ وَتَوَاصَوْا بِالصَّبْرِ",
                        latin: "Illalladziina aamanuu wa 'amilus shaalihaati wa tawaashau bil haqqi wa tawaashau bish shabr",
                        translation: "Kecuali orang-orang yang beriman dan mengerjakan amal saleh dan nasehat menasehati supaya mentaati kebenaran dan nasehat menasehati supaya menetapi kesabaran"
                    }
                ]
            },
            quraisy: {
                name: "سورة قريش",
                nameIndo: "Surah Quraisy",
                meaning: "Suku Quraisy",
                type: "مكية",
                verses: 4,
                content: [
                    {
                        arabic: "لِإِيلَافِ قُرَيْشٍ",
                        latin: "Li iilaafi Quraisy",
                        translation: "Karena kebiasaan orang-orang Quraisy"
                    },
                    {
                        arabic: "إِيلَافِهِمْ رِحْلَةَ الشِّتَاءِ وَالصَّيْفِ",
                        latin: "Iilaafihim rihlataasy syitaa'i wash shaif",
                        translation: "(yaitu) kebiasaan mereka bepergian pada musim dingin dan musim panas"
                    },
                    {
                        arabic: "فَلْيَعْبُدُوا رَبَّ هَٰذَا الْبَيْتِ",
                        latin: "Falyaa'buduu rabba haadzal bait",
                        translation: "Maka hendaklah mereka menyembah Tuhan pemilik rumah ini (Ka'bah)"
                    },
                    {
                        arabic: "الَّذِي أَطْعَمَهُم مِّن جُوعٍ وَآمَنَهُم مِّنْ خَوْفٍ",
                        latin: "Alladzii ath'amahum min juu'iw wa aamanahum min khauf",
                        translation: "Yang telah memberi makanan kepada mereka untuk menghilangkan lapar dan mengamankan mereka dari ketakutan"
                    }
                ]
            },
            maun: {
                name: "سورة الماعون",
                nameIndo: "Surah Al-Ma'un",
                meaning: "Barang-barang yang berguna",
                type: "مكية",
                verses: 7,
                content: [
                    {
                        arabic: "أَرَأَيْتَ الَّذِي يُكَذِّبُ بِالدِّينِ",
                        latin: "Ara'aitalladziي yukadzdzibu biddiin",
                        translation: "Tahukah kamu (orang) yang mendustakan agama?"
                    },
                    {
                        arabic: "فَذَٰلِكَ الَّذِي يَدُعُّ الْيَتِيمَ",
                        latin: "Fadzaalikal ladziي yadu'ul yatiim",
                        translation: "Itulah orang yang menghardik anak yatim"
                    },
                    {
                        arabic: "وَلَا يَحُضُّ عَلَىٰ طَعَامِ الْمِسْكِينِ",
                        latin: "Wa laa yahudhdhu 'alaa tha'aamil miskiin",
                        translation: "dan tidak menganjurkan memberi makan orang miskin"
                    },
                    {
                        arabic: "فَوَيْلٌ لِّلْمُصَلِّينَ",
                        latin: "Fawailul lil mushalliin",
                        translation: "Maka kecelakaanlah bagi orang-orang yang shalat"
                    },
                    {
                        arabic: "الَّذِينَ هُمْ عَن صَلَاتِهِمْ سَاهُونَ",
                        latin: "Alladziina hum 'an shalaatihim saahuum",
                        translation: "(yaitu) orang-orang yang lalai dari shalatnya"
                    },
                    {
                        arabic: "الَّذِينَ هُمْ يُرَاءُونَ",
                        latin: "Alladziina hum yuraa'uun",
                        translation: "orang-orang yang berbuat riya"
                    },
                    {
                        arabic: "وَيَمْنَعُونَ الْمَاعُونَ",
                        latin: "Wa yamna'uunal maa'uun",
                        translation: "dan enggan (menolong dengan) barang berguna"
                    }
                ]
            },
            takatsur: {
                name: "سورة التكاثر",
                nameIndo: "Surah At-Takatsur",
                meaning: "Bermegah-megahan",
                type: "مكية",
                verses: 8,
                content: [
                    {
                        arabic: "أَلْهَاكُمُ التَّكَاثُرُ",
                        latin: "Alhaakumut takaatsur",
                        translation: "Bermegah-megahan telah melalaikan kamu"
                    },
                    {
                        arabic: "حَتَّىٰ زُرْتُمُ الْمَقَابِرَ",
                        latin: "Hattaa zurtumul maqaabir",
                        translation: "sampai kamu masuk ke dalam kubur"
                    },
                    {
                        arabic: "كَلَّا سَوْفَ تَعْلَمُونَ",
                        latin: "Kallaa saufa ta'lamuun",
                        translation: "Jangan begitu, kelak kamu akan mengetahui (akibat perbuatanmu itu)"
                    },
                    {
                        arabic: "ثُمَّ كَلَّا سَوْفَ تَعْلَمُونَ",
                        latin: "Tsumma kallaa saufa ta'lamuun",
                        translation: "kemudian jangan begitu, kelak kamu akan mengetahui"
                    },
                    {
                        arabic: "كَلَّا لَوْ تَعْلَمُونَ عِلْمَ الْيَقِينِ",
                        latin: "Kallaa lau ta'lamuuna 'ilmal yaqiin",
                        translation: "Jangan begitu, jika kamu mengetahui dengan pengetahuan yang yakin"
                    },
                    {
                        arabic: "لَتَرَوُنَّ الْجَحِيمَ",
                        latin: "Latarawunnal jahiim",
                        translation: "niscaya kamu benar-benar akan melihat neraka Jahim"
                    },
                    {
                        arabic: "ثُمَّ لَتَرَوُنَّهَا عَيْنَ الْيَقِينِ",
                        latin: "Tsumma latarawunnahaa 'ainal yaqiin",
                        translation: "kemudian kamu benar-benar akan melihatnya dengan mata kepala sendiri"
                    },
                    {
                        arabic: "ثُمَّ لَتُسْأَلُنَّ يَوْمَئِذٍ عَنِ النَّعِيمِ",
                        latin: "Tsumma latus'alunna yauma'idzin 'anin na'iim",
                        translation: "kemudian kamu akan ditanya pada hari itu tentang kenikmatan (yang kamu peroleh di dunia)"
                    }
                ]
            }
        };

        // Hadis data
        const hadisData = {
            hadis_takwa: {
                title: "حديث عن التقوى",
                titleIndo: "Hadis tentang Takwa",
                hadis: "اتَّقِ اللَّهَ حَيْثُمَا كُنْتَ، وَأَتْبِعِ السَّيِّئَةَ الْحَسَنَةَ تَمْحُهَا، وَخَالِقِ النَّاسَ بِخُلُقٍ حَسَنٍ",
                latin: "Ittaqillaha haitsuma kunta, wa atbi'is sayyi'atal hasanata tamhuha, wa khaliqin nasa bi khuluqin hasan",
                translation: "Bertakwalah kepada Allah di mana pun kamu berada, ikutilah perbuatan buruk dengan perbuatan baik yang dapat menghapusnya, dan pergaulilah manusia dengan akhlak yang baik",
                rawi: "رواه الترمذي",
                rawiIndo: "HR. At-Tirmidzi",
                explanation: "Hadis ini mengajarkan tiga hal penting: 1) Bertakwa kepada Allah di segala tempat dan waktu, 2) Memperbaiki kesalahan dengan amal baik, 3) Berakhlak mulia kepada sesama manusia."
            },
            hadis_niat: {
                title: "حديث عن النية",
                titleIndo: "Hadis tentang Niat",
                hadis: "إِنَّمَا الْأَعْمَالُ بِالنِّيَّاتِ، وَإِنَّمَا لِكُلِّ امْرِئٍ مَا نَوَى",
                latin: "Innamal a'malu bin niyyat, wa innama likulli mri'in ma nawa",
                translation: "Sesungguhnya amal perbuatan itu tergantung pada niatnya, dan sesungguhnya setiap orang akan mendapat apa yang diniatkannya",
                rawi: "رواه البخاري ومسلم",
                rawiIndo: "HR. Bukhari dan Muslim",
                explanation: "Hadis ini menjelaskan pentingnya niat dalam setiap amal perbuatan. Niat yang baik akan membuat amal menjadi bernilai ibadah, sedangkan niat yang buruk dapat merusak pahala amal tersebut."
            }
        };

        // Tajweed data
        const tajweedData = {
            tajweed: {
                title: "أحكام الإظهار والإخفاء",
                titleIndo: "Hukum Izhar dan Ikhfa'",
                izhar: {
                    definition: "الإظهار لغة: البيان والوضوح. واصطلاحاً: إخراج كل حرف من مخرجه من غير غنة في الحرف المظهر",
                    definitionIndo: "Izhar secara bahasa berarti jelas dan terang. Secara istilah: mengeluarkan setiap huruf dari tempat keluarnya tanpa dengung pada huruf yang di-izhar-kan",
                    huruf: "ء ه ع ح غ خ",
                    hurufNames: ["الهمزة", "الهاء", "العين", "الحاء", "الغين", "الخاء"],
                    contoh: [
                        { arabic: "مِنْ آمَنَ", keterangan: "نون ساكنة + همزة" },
                        { arabic: "مِنْ هَادٍ", keterangan: "نون ساكنة + هاء" },
                        { arabic: "مِنْ عِلْمٍ", keterangan: "نون ساكنة + عين" },
                        { arabic: "مِنْ حَكِيمٍ", keterangan: "نون ساكنة + حاء" },
                        { arabic: "مِنْ غِلٍّ", keterangan: "نون ساكنة + غين" },
                        { arabic: "مِنْ خَيْرٍ", keterangan: "نون ساكنة + خاء" }
                    ]
                },
                ikhfa: {
                    definition: "الإخفاء لغة: الستر. واصطلاحاً: النطق بالحرف بصفة بين الإظهار والإدغام عارٍ عن التشديد مع بقاء الغنة",
                    definitionIndo: "Ikhfa' secara bahasa berarti menyembunyikan. Secara istilah: mengucapkan huruf dengan sifat antara izhar dan idgham tanpa tasydid dengan tetap mempertahankan dengung",
                    huruf: "ص ذ ث ك ج ش ق س د ط ز ف ت ض ظ",
                    hurufCount: "15 حرفاً",
                    contoh: [
                        { arabic: "مِنْ صَالِحٍ", keterangan: "نون ساكنة + صاد" },
                        { arabic: "مِنْ ذَهَبٍ", keterangan: "نون ساكنة + ذال" },
                        { arabic: "مِنْ ثَمَرَةٍ", keterangan: "نون ساكنة + ثاء" },
                        { arabic: "مِنْ كُلِّ", keterangan: "نون ساكنة + كاف" },
                        { arabic: "مِنْ جَنَّةٍ", keterangan: "نون ساكنة + جيم" },
                        { arabic: "مِنْ شَيْءٍ", keterangan: "نون ساكنة + شين" }
                    ]
                }
            }
        };

        // Navigation functions
        function showMainMenu() {
            document.getElementById('mainMenu').classList.remove('hidden');
            document.getElementById('subMenu').classList.add('hidden');
            document.getElementById('contentArea').classList.add('hidden');
            stopAudio();
        }

        function showSubMenu(topic) {
            currentTopic = topic;
            document.getElementById('mainMenu').classList.add('hidden');
            document.getElementById('subMenu').classList.remove('hidden');
            document.getElementById('contentArea').classList.add('hidden');
            
            const titles = {
                tajweed: 'أحكام الإظهار والإخفاء - Hukum Izhar dan Ikhfa\'',
                alashr: 'سورة العصر - Surah Al-Ashr',
                quraisy: 'سورة قريش - Surah Quraisy',
                maun: 'سورة الماعون - Surah Al-Ma\'un',
                takatsur: 'سورة التكاثر - Surah At-Takatsur',
                hadis_takwa: 'حديث عن التقوى - Hadis tentang Takwa',
                hadis_niat: 'حديث عن النية - Hadis tentang Niat'
            };
            
            document.getElementById('subMenuTitle').textContent = titles[topic];
            stopAudio();
        }

        function showContent(contentType) {
            currentContent = contentType;
            document.getElementById('subMenu').classList.add('hidden');
            document.getElementById('contentArea').classList.remove('hidden');
            
            const titles = {
                materi: 'Materi Pembelajaran',
                game: 'Game Edukasi',
                evaluasi: 'Evaluasi'
            };
            
            document.getElementById('contentTitle').textContent = titles[contentType];
            loadContent(currentTopic, contentType);
            stopAudio();
            
            // Mark progress when accessing content
            updateStudentProgress(currentTopic, contentType);
        }

        // Content loading functions
        function loadContent(topic, contentType) {
            const contentBody = document.getElementById('contentBody');
            
            switch(contentType) {
                case 'materi':
                    loadMateriContent(topic, contentBody);
                    break;
                case 'game':
                    loadGameContent(topic, contentBody);
                    break;
                case 'evaluasi':
                    loadEvaluasiContent(topic, contentBody);
                    break;
            }
        }

        function loadMateriContent(topic, container) {
            if (topic === 'tajweed') {
                loadTajweedMateri(container);
            } else if (topic.startsWith('hadis_')) {
                loadHadisMateri(topic, container);
            } else {
                loadSurahMateri(topic, container);
            }
        }

        function loadSurahMateri(surahKey, container) {
            const surah = surahData[surahKey];
            if (!surah) return;

            container.innerHTML = `
                <div class="text-center mb-8">
                    <h3 class="text-4xl font-bold text-gray-800 mb-4 arabic-text">${surah.name}</h3>
                    <p class="text-2xl text-gray-600 font-semibold mb-2">${surah.nameIndo}</p>
                    <p class="text-lg text-gray-500 mb-4">Artinya: ${surah.meaning}</p>
                    <div class="flex justify-center space-x-4 mb-6">
                        <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-semibold">
                            <i class="fas fa-map-marker-alt mr-2"></i>${surah.type}
                        </span>
                        <span class="bg-green-100 text-green-800 px-4 py-2 rounded-full font-semibold">
                            <i class="fas fa-list-ol mr-2"></i>${surah.verses} آيات
                        </span>
                    </div>
                    
                    <!-- Audio Controls -->
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-2xl mb-8 border-2 border-blue-200">
                        <h4 class="text-xl font-bold text-gray-700 mb-4">
                            <i class="fas fa-volume-up mr-2 text-blue-600"></i>
                            Dengarkan Audio Surah
                        </h4>
                        <button onclick="playFullSurah('${surahKey}')" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all shadow-lg">
                            <i class="fas fa-play mr-2"></i>
                            Putar Surah Lengkap
                        </button>
                        <div id="audioStatus" class="mt-4 text-sm text-gray-600"></div>
                    </div>
                </div>

                <!-- Verses -->
                <div class="space-y-6">
                    ${surah.content.map((verse, index) => `
                        <div class="verse-highlight p-6 rounded-2xl border border-gray-200 shadow-lg">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <div class="flex items-center mb-4">
                                        <span class="bg-gradient-to-r from-blue-500 to-purple-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ml-4">
                                            ${index + 1}
                                        </span>
                                        <button onclick="playVerse('${surahKey}', ${index})" class="bg-green-500 text-white px-4 py-2 rounded-full hover:bg-green-600 transition-colors">
                                            <i class="fas fa-play mr-2"></i>
                                            Dengarkan Ayat
                                        </button>
                                    </div>
                                    
                                    <div class="text-3xl arabic-large text-gray-800 mb-4 leading-loose text-right p-4 bg-gray-50 rounded-xl">
                                        ${verse.arabic}
                                    </div>
                                    
                                    <div class="bg-blue-50 p-4 rounded-xl mb-3">
                                        <p class="text-lg text-blue-800 font-semibold mb-2 indo-text">
                                            <i class="fas fa-font mr-2"></i>
                                            Bacaan Latin:
                                        </p>
                                        <p class="text-blue-700 italic latin-text">${verse.latin}</p>
                                    </div>
                                    
                                    <div class="bg-green-50 p-4 rounded-xl">
                                        <p class="text-lg text-green-800 font-semibold mb-2 indo-text">
                                            <i class="fas fa-language mr-2"></i>
                                            Terjemahan:
                                        </p>
                                        <p class="text-green-700 indo-text">${verse.translation}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <!-- Study Tips -->
                <div class="mt-8 bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-2xl border-2 border-yellow-200">
                    <h4 class="text-xl font-bold text-orange-800 mb-4">
                        <i class="fas fa-lightbulb mr-2"></i>
                        Tips Belajar
                    </h4>
                    <ul class="text-orange-700 space-y-2">
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>Dengarkan audio berulang-ulang</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>Hafalkan per ayat secara bertahap</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>Pahami arti setiap ayat</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>Praktikkan dalam shalat</li>
                    </ul>
                </div>
            `;
        }

        function loadHadisMateri(hadisKey, container) {
            const hadis = hadisData[hadisKey];
            if (!hadis) return;

            container.innerHTML = `
                <div class="text-center mb-8">
                    <h3 class="text-4xl font-bold text-gray-800 mb-4 arabic-text">${hadis.title}</h3>
                    <p class="text-2xl text-gray-600 font-semibold mb-6">${hadis.titleIndo}</p>
                </div>

                <!-- Hadis Text -->
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-3xl border-3 border-green-200 shadow-xl mb-8">
                    <div class="text-center mb-6">
                        <h4 class="text-2xl font-bold text-green-800 mb-4 arabic-text">نص الحديث</h4>
                        <button onclick="playHadisAudio('${hadisKey}')" class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg">
                            <i class="fas fa-volume-up mr-2"></i>
                            استمع للحديث
                        </button>
                        <div id="hadisAudioStatus" class="mt-4 text-sm text-gray-600"></div>
                    </div>
                    
                    <div class="text-3xl arabic-large text-gray-800 mb-6 leading-loose text-center p-6 bg-white rounded-2xl shadow-inner">
                        ${hadis.hadis}
                    </div>
                    
                    <div class="bg-blue-50 p-6 rounded-2xl mb-4">
                        <p class="text-lg text-blue-800 font-semibold mb-3 indo-text">
                            <i class="fas fa-font mr-2"></i>
                            Bacaan Latin:
                        </p>
                        <p class="text-blue-700 italic text-lg leading-relaxed latin-text">${hadis.latin}</p>
                    </div>
                    
                    <div class="bg-purple-50 p-6 rounded-2xl mb-4">
                        <p class="text-lg text-purple-800 font-semibold mb-3 indo-text">
                            <i class="fas fa-language mr-2"></i>
                            Terjemahan:
                        </p>
                        <p class="text-purple-700 text-lg leading-relaxed indo-text">${hadis.translation}</p>
                    </div>
                    
                    <div class="text-center">
                        <p class="text-lg text-gray-600 arabic-text">${hadis.rawi}</p>
                        <p class="text-gray-500">${hadis.rawiIndo}</p>
                    </div>
                </div>

                <!-- Explanation -->
                <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-8 rounded-2xl border-2 border-yellow-200 mb-8">
                    <h4 class="text-2xl font-bold text-orange-800 mb-4">
                        <i class="fas fa-book-open mr-2"></i>
                        شرح الحديث
                    </h4>
                    <p class="text-orange-700 text-lg leading-relaxed">${hadis.explanation}</p>
                </div>

                <!-- Benefits -->
                <div class="bg-gradient-to-r from-teal-50 to-cyan-50 p-8 rounded-2xl border-2 border-teal-200">
                    <h4 class="text-2xl font-bold text-teal-800 mb-4">
                        <i class="fas fa-heart mr-2"></i>
                        فوائد الحديث
                    </h4>
                    <ul class="text-teal-700 space-y-3 text-lg">
                        ${hadisKey === 'hadis_takwa' ? `
                            <li><i class="fas fa-star mr-2 text-yellow-500"></i>Mengajarkan pentingnya takwa dalam kehidupan</li>
                            <li><i class="fas fa-star mr-2 text-yellow-500"></i>Menunjukkan cara memperbaiki kesalahan</li>
                            <li><i class="fas fa-star mr-2 text-yellow-500"></i>Mendorong akhlak mulia kepada sesama</li>
                        ` : `
                            <li><i class="fas fa-star mr-2 text-yellow-500"></i>Menjelaskan pentingnya niat dalam beramal</li>
                            <li><i class="fas fa-star mr-2 text-yellow-500"></i>Mengajarkan bahwa pahala tergantung niat</li>
                            <li><i class="fas fa-star mr-2 text-yellow-500"></i>Mendorong untuk selalu berniat baik</li>
                        `}
                    </ul>
                </div>
            `;
        }

        function loadTajweedMateri(container) {
            const data = tajweedData.tajweed;
            
            container.innerHTML = `
                <div class="text-center mb-8">
                    <h3 class="text-4xl font-bold text-gray-800 mb-4 arabic-text">${data.title}</h3>
                    <p class="text-2xl text-gray-600 font-semibold mb-6">${data.titleIndo}</p>
                </div>

                <!-- Izhar Section -->
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-3xl border-3 border-blue-200 shadow-xl mb-8">
                    <h4 class="text-3xl font-bold text-blue-800 mb-6 arabic-text text-center">
                        <i class="fas fa-eye mr-3"></i>
                        الإظهار
                    </h4>
                    
                    <div class="bg-white p-6 rounded-2xl mb-6 shadow-inner">
                        <h5 class="text-xl font-bold text-gray-700 mb-3">التعريف:</h5>
                        <p class="text-lg arabic-text text-gray-800 mb-3 leading-relaxed">${data.izhar.definition}</p>
                        <p class="text-lg text-gray-700 leading-relaxed">${data.izhar.definitionIndo}</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-100 to-indigo-100 p-6 rounded-2xl mb-6">
                        <h5 class="text-xl font-bold text-blue-800 mb-4">حروف الإظهار (6 أحرف):</h5>
                        <div class="grid grid-cols-3 md:grid-cols-6 gap-4 mb-4">
                            ${data.izhar.huruf.split(' ').map((huruf, index) => `
                                <div class="bg-white p-4 rounded-xl text-center shadow-lg">
                                    <div class="text-3xl arabic-text text-blue-600 font-bold mb-2">${huruf}</div>
                                    <div class="text-sm text-gray-600">${data.izhar.hurufNames[index]}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-2xl">
                        <h5 class="text-xl font-bold text-gray-700 mb-4">أمثلة الإظهار:</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${data.izhar.contoh.map(contoh => `
                                <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
                                    <div class="text-2xl arabic-text text-blue-800 font-bold mb-2">${contoh.arabic}</div>
                                    <div class="text-sm text-gray-600">${contoh.keterangan}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <!-- Ikhfa Section -->
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-3xl border-3 border-green-200 shadow-xl mb-8">
                    <h4 class="text-3xl font-bold text-green-800 mb-6 arabic-text text-center">
                        <i class="fas fa-eye-slash mr-3"></i>
                        الإخفاء
                    </h4>
                    
                    <div class="bg-white p-6 rounded-2xl mb-6 shadow-inner">
                        <h5 class="text-xl font-bold text-gray-700 mb-3">التعريف:</h5>
                        <p class="text-lg arabic-text text-gray-800 mb-3 leading-relaxed">${data.ikhfa.definition}</p>
                        <p class="text-lg text-gray-700 leading-relaxed">${data.ikhfa.definitionIndo}</p>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-100 to-emerald-100 p-6 rounded-2xl mb-6">
                        <h5 class="text-xl font-bold text-green-800 mb-4">حروف الإخفاء (${data.ikhfa.hurufCount}):</h5>
                        <div class="grid grid-cols-5 md:grid-cols-10 gap-3 mb-4">
                            ${data.ikhfa.huruf.split(' ').map(huruf => `
                                <div class="bg-white p-3 rounded-xl text-center shadow-lg">
                                    <div class="text-2xl arabic-text text-green-600 font-bold">${huruf}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-2xl">
                        <h5 class="text-xl font-bold text-gray-700 mb-4">أمثلة الإخفاء:</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${data.ikhfa.contoh.map(contoh => `
                                <div class="bg-green-50 p-4 rounded-xl border border-green-200">
                                    <div class="text-2xl arabic-text text-green-800 font-bold mb-2">${contoh.arabic}</div>
                                    <div class="text-sm text-gray-600">${contoh.keterangan}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <!-- Summary -->
                <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-8 rounded-2xl border-2 border-purple-200">
                    <h4 class="text-2xl font-bold text-purple-800 mb-4">
                        <i class="fas fa-lightbulb mr-2"></i>
                        ملخص الدرس
                    </h4>
                    <ul class="text-purple-700 space-y-3 text-lg">
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>الإظهار: وضوح النطق مع 6 أحرف</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>الإخفاء: إخفاء النطق مع غنة مع 15 حرفاً</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>حفظ الحروف والأمثلة مهم جداً</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>التطبيق العملي في القراءة</li>
                    </ul>
                </div>
            `;
        }

        // Audio functions
        function playFullSurah(surahKey) {
            const audioLink = audioTemplates[surahKey]?.full;
            if (audioLink && audioLink !== `AUDIO_LINK_SURAH_${surahKey.toUpperCase()}_FULL`) {
                playAudio(audioLink, `تشغيل ${surahData[surahKey].name} كاملة`);
            } else {
                showAudioPlaceholder('السورة كاملة');
            }
        }

        function playVerse(surahKey, verseIndex) {
            const audioLink = audioTemplates[surahKey]?.verses[verseIndex];
            if (audioLink && !audioLink.startsWith('AUDIO_LINK_')) {
                playAudio(audioLink, `تشغيل الآية ${verseIndex + 1}`);
            } else {
                showAudioPlaceholder(`الآية ${verseIndex + 1}`);
            }
        }

        function playHadisAudio(hadisKey) {
            const hadis = hadisData[hadisKey];
            if (hadis) {
                // Use Web Speech API for Arabic TTS
                speakArabicText(hadis.hadis, `تشغيل ${hadis.title}`);
            }
        }

        function speakArabicText(text, statusText) {
            if ('speechSynthesis' in window) {
                stopAudio();
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ar-SA';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                utterance.onstart = () => {
                    isPlaying = true;
                    updateAudioStatus(statusText, true);
                };
                
                utterance.onend = () => {
                    isPlaying = false;
                    updateAudioStatus('تم الانتهاء من التشغيل', false);
                };
                
                utterance.onerror = () => {
                    isPlaying = false;
                    updateAudioStatus('خطأ في التشغيل', false);
                };
                
                speechSynthesis.speak(utterance);
                currentAudio = utterance;
            } else {
                Swal.fire({
                    title: 'تنبيه',
                    text: 'المتصفح لا يدعم تشغيل الصوت',
                    icon: 'warning',
                    confirmButtonText: 'حسناً'
                });
            }
        }

        function playAudio(audioSrc, statusText) {
            stopAudio();
            
            const audio = new Audio(audioSrc);
            audio.onloadstart = () => {
                updateAudioStatus('جاري التحميل...', true);
            };
            
            audio.oncanplay = () => {
                updateAudioStatus(statusText, true);
                audio.play();
            };
            
            audio.onended = () => {
                isPlaying = false;
                updateAudioStatus('تم الانتهاء من التشغيل', false);
            };
            
            audio.onerror = () => {
                isPlaying = false;
                updateAudioStatus('خطأ في تحميل الملف الصوتي', false);
            };
            
            currentAudio = audio;
            isPlaying = true;
        }

        function showAudioPlaceholder(itemName) {
            Swal.fire({
                title: 'ملف صوتي غير متوفر',
                text: `الملف الصوتي لـ ${itemName} لم يتم رفعه بعد. سيتم إضافته قريباً إن شاء الله.`,
                icon: 'info',
                confirmButtonText: 'حسناً',
                footer: 'يمكنك استخدام الميزات الأخرى في التطبيق'
            });
        }

        function stopAudio() {
            if (currentAudio) {
                if (currentAudio instanceof Audio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                } else if (typeof currentAudio === 'object') {
                    speechSynthesis.cancel();
                }
                currentAudio = null;
                isPlaying = false;
                updateAudioStatus('', false);
            }
        }

        function updateAudioStatus(message, playing) {
            const statusElements = ['audioStatus', 'hadisAudioStatus'];
            statusElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    if (playing) {
                        element.innerHTML = `
                            <div class="flex items-center justify-center text-blue-600">
                                <div class="loading-spinner mr-3"></div>
                                <span>${message}</span>
                                <button onclick="stopAudio()" class="mr-3 bg-red-500 text-white px-3 py-1 rounded-full text-xs hover:bg-red-600">
                                    <i class="fas fa-stop mr-1"></i>إيقاف
                                </button>
                            </div>
                        `;
                    } else {
                        element.innerHTML = message ? `<span class="text-gray-600">${message}</span>` : '';
                    }
                }
            });
        }

        // Game functions
        function loadGameContent(topic, container) {
            container.innerHTML = `
                <div class="text-center mb-8">
                    <h3 class="text-3xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-gamepad mr-3 text-purple-600"></i>
                        الألعاب التعليمية
                    </h3>
                    <p class="text-xl text-gray-600">اختر اللعبة التي تريد أن تلعبها</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Memory Game -->
                    <div class="game-button text-white p-8 rounded-2xl shadow-xl cursor-pointer transform hover:scale-105 transition-all" onclick="startMemoryGame('${topic}')">
                        <div class="text-center">
                            <div class="text-5xl mb-4">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h4 class="text-2xl font-bold mb-3">لعبة الذاكرة</h4>
                            <p class="text-lg opacity-90">اعثر على الأزواج المتطابقة</p>
                        </div>
                    </div>

                    <!-- Quiz Game -->
                    <div class="bg-gradient-to-br from-green-500 to-emerald-600 text-white p-8 rounded-2xl shadow-xl cursor-pointer transform hover:scale-105 transition-all" onclick="startQuizGame('${topic}')">
                        <div class="text-center">
                            <div class="text-5xl mb-4">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <h4 class="text-2xl font-bold mb-3">لعبة الأسئلة</h4>
                            <p class="text-lg opacity-90">أجب على الأسئلة بسرعة</p>
                        </div>
                    </div>

                    <!-- Matching Game -->
                    <div class="bg-gradient-to-br from-orange-500 to-red-600 text-white p-8 rounded-2xl shadow-xl cursor-pointer transform hover:scale-105 transition-all" onclick="startMatchingGame('${topic}')">
                        <div class="text-center">
                            <div class="text-5xl mb-4">
                                <i class="fas fa-link"></i>
                            </div>
                            <h4 class="text-2xl font-bold mb-3">لعبة المطابقة</h4>
                            <p class="text-lg opacity-90">اربط النص بالمعنى</p>
                        </div>
                    </div>

                    <!-- Word Puzzle -->
                    <div class="bg-gradient-to-br from-pink-500 to-purple-600 text-white p-8 rounded-2xl shadow-xl cursor-pointer transform hover:scale-105 transition-all" onclick="startWordPuzzle('${topic}')">
                        <div class="text-center">
                            <div class="text-5xl mb-4">
                                <i class="fas fa-puzzle-piece"></i>
                            </div>
                            <h4 class="text-2xl font-bold mb-3">لغز الكلمات</h4>
                            <p class="text-lg opacity-90">رتب الحروف لتكوين الكلمة</p>
                        </div>
                    </div>

                    <!-- Audio Game -->
                    <div class="bg-gradient-to-br from-teal-500 to-cyan-600 text-white p-8 rounded-2xl shadow-xl cursor-pointer transform hover:scale-105 transition-all" onclick="startAudioGame('${topic}')">
                        <div class="text-center">
                            <div class="text-5xl mb-4">
                                <i class="fas fa-headphones"></i>
                            </div>
                            <h4 class="text-2xl font-bold mb-3">لعبة الاستماع</h4>
                            <p class="text-lg opacity-90">استمع واختر الإجابة الصحيحة</p>
                        </div>
                    </div>

                    <!-- Speed Challenge -->
                    <div class="bg-gradient-to-br from-yellow-500 to-orange-500 text-white p-8 rounded-2xl shadow-xl cursor-pointer transform hover:scale-105 transition-all" onclick="startSpeedChallenge('${topic}')">
                        <div class="text-center">
                            <div class="text-5xl mb-4">
                                <i class="fas fa-stopwatch"></i>
                            </div>
                            <h4 class="text-2xl font-bold mb-3">تحدي السرعة</h4>
                            <p class="text-lg opacity-90">أجب بأسرع ما يمكن</p>
                        </div>
                    </div>
                </div>

                <!-- Game Instructions -->
                <div class="mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border-2 border-blue-200">
                    <h4 class="text-xl font-bold text-blue-800 mb-4">
                        <i class="fas fa-info-circle mr-2"></i>
                        تعليمات الألعاب
                    </h4>
                    <ul class="text-blue-700 space-y-2">
                        <li><i class="fas fa-star mr-2 text-yellow-500"></i>اكسب النقاط بالإجابات الصحيحة</li>
                        <li><i class="fas fa-star mr-2 text-yellow-500"></i>كلما كانت إجابتك أسرع، كانت النقاط أكثر</li>
                        <li><i class="fas fa-star mr-2 text-yellow-500"></i>استخدم الصوت لتعلم النطق الصحيح</li>
                        <li><i class="fas fa-star mr-2 text-yellow-500"></i>تحدى نفسك لتحسين درجاتك</li>
                    </ul>
                </div>
            `;
        }

        // Evaluation functions
        function loadEvaluasiContent(topic, container) {
            container.innerHTML = `
                <div class="text-center mb-8">
                    <h3 class="text-3xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-clipboard-check mr-3 text-green-600"></i>
                        التقييم والاختبار
                    </h3>
                    <p class="text-xl text-gray-600">اختبر فهمك للمادة</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Quick Quiz -->
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-8 rounded-2xl border-3 border-green-200 shadow-xl">
                        <div class="text-center mb-6">
                            <div class="text-5xl mb-4 text-green-600">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h4 class="text-2xl font-bold text-green-800 mb-3">اختبار سريع</h4>
                            <p class="text-gray-600 mb-4">5 أسئلة في 3 دقائق</p>
                        </div>
                        <button onclick="startQuickEvaluation('${topic}')" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 rounded-xl text-lg font-semibold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg">
                            <i class="fas fa-play mr-2"></i>
                            ابدأ الاختبار السريع
                        </button>
                    </div>

                    <!-- Comprehensive Test -->
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-2xl border-3 border-blue-200 shadow-xl">
                        <div class="text-center mb-6">
                            <div class="text-5xl mb-4 text-blue-600">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <h4 class="text-2xl font-bold text-blue-800 mb-3">اختبار شامل</h4>
                            <p class="text-gray-600 mb-4">15 سؤال في 10 دقائق</p>
                        </div>
                        <button onclick="startComprehensiveEvaluation('${topic}')" class="w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-xl text-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg">
                            <i class="fas fa-play mr-2"></i>
                            ابدأ الاختبار الشامل
                        </button>
                    </div>
                </div>

                <!-- Progress Tracking -->
                <div class="mt-8 bg-gradient-to-r from-purple-50 to-pink-50 p-8 rounded-2xl border-2 border-purple-200">
                    <h4 class="text-2xl font-bold text-purple-800 mb-6">
                        <i class="fas fa-chart-line mr-2"></i>
                        تتبع التقدم
                    </h4>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                            <div class="text-3xl mb-2 text-blue-600">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <h5 class="text-lg font-bold text-gray-700 mb-2">أعلى درجة</h5>
                            <p class="text-2xl font-bold text-blue-600" id="highScore">0%</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                            <div class="text-3xl mb-2 text-green-600">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h5 class="text-lg font-bold text-gray-700 mb-2">الاختبارات المكتملة</h5>
                            <p class="text-2xl font-bold text-green-600" id="completedTests">0</p>
                        </div>
                        
                        <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                            <div class="text-3xl mb-2 text-yellow-600">
                                <i class="fas fa-star"></i>
                            </div>
                            <h5 class="text-lg font-bold text-gray-700 mb-2">متوسط الدرجات</h5>
                            <p class="text-2xl font-bold text-yellow-600" id="averageScore">0%</p>
                        </div>
                    </div>
                </div>

                <!-- Evaluation Tips -->
                <div class="mt-8 bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-2xl border-2 border-yellow-200">
                    <h4 class="text-xl font-bold text-orange-800 mb-4">
                        <i class="fas fa-lightbulb mr-2"></i>
                        نصائح للاختبار
                    </h4>
                    <ul class="text-orange-700 space-y-2">
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>راجع المادة قبل الاختبار</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>اقرأ السؤال بعناية</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>لا تتردد في استخدام الصوت</li>
                        <li><i class="fas fa-check-circle mr-2 text-green-500"></i>إدارة الوقت مهمة</li>
                    </ul>
                </div>
            `;
        }

        // Evaluation Questions Template
        const evaluationQuestions = {
            alashr: {
                quick: [
                    {
                        question: "كم عدد آيات سورة العصر؟",
                        options: ["2 آيات", "3 آيات", "4 آيات", "5 آيات"],
                        correct: 1,
                        explanation: "سورة العصر تتكون من 3 آيات"
                    },
                    {
                        question: "ما معنى كلمة 'العصر' في السورة؟",
                        options: ["الليل", "النهار", "الوقت/الزمن", "الصباح"],
                        correct: 2,
                        explanation: "العصر يعني الوقت أو الزمن"
                    },
                    {
                        question: "من هم الذين لا يخسرون حسب السورة؟",
                        options: ["الأغنياء", "المؤمنون الصالحون", "التجار", "العلماء فقط"],
                        correct: 1,
                        explanation: "الذين آمنوا وعملوا الصالحات وتواصوا بالحق والصبر"
                    },
                    {
                        question: "ما هي السورة التي تأتي قبل سورة العصر؟",
                        options: ["سورة التكاثر", "سورة القارعة", "سورة العاديات", "سورة الزلزلة"],
                        correct: 0,
                        explanation: "سورة التكاثر تأتي قبل سورة العصر في ترتيب المصحف"
                    },
                    {
                        question: "سورة العصر هي سورة:",
                        options: ["مدنية", "مكية", "مختلف فيها", "نزلت في الطائف"],
                        correct: 1,
                        explanation: "سورة العصر سورة مكية"
                    }
                ],
                comprehensive: [
                    // Add more comprehensive questions here
                    {
                        question: "اكتب الآية الأولى من سورة العصر",
                        type: "text",
                        answer: "والعصر",
                        explanation: "الآية الأولى هي: والعصر"
                    }
                ]
            },
            quraisy: {
                quick: [
                    {
                        question: "كم عدد آيات سورة قريش؟",
                        options: ["3 آيات", "4 آيات", "5 آيات", "6 آيات"],
                        correct: 1,
                        explanation: "سورة قريش تتكون من 4 آيات"
                    }
                    // Add more questions...
                ],
                comprehensive: []
            },
            maun: {
                quick: [
                    {
                        question: "ما معنى كلمة 'الماعون'؟",
                        options: ["الطعام", "الماء", "الأواني المنزلية", "النقود"],
                        correct: 2,
                        explanation: "الماعون يعني الأواني والأدوات المنزلية البسيطة"
                    }
                    // Add more questions...
                ],
                comprehensive: []
            },
            takatsur: {
                quick: [
                    {
                        question: "ما معنى 'التكاثر'؟",
                        options: ["الكثرة", "المباهاة والتفاخر", "الجمع", "العدد"],
                        correct: 1,
                        explanation: "التكاثر يعني المباهاة والتفاخر بكثرة الأموال والأولاد"
                    }
                    // Add more questions...
                ],
                comprehensive: []
            },
            hadis_takwa: {
                quick: [
                    {
                        question: "من راوي حديث التقوى المذكور؟",
                        options: ["البخاري", "مسلم", "الترمذي", "أبو داود"],
                        correct: 2,
                        explanation: "الحديث رواه الإمام الترمذي"
                    }
                    // Add more questions...
                ],
                comprehensive: []
            },
            hadis_niat: {
                quick: [
                    {
                        question: "من راوي حديث 'إنما الأعمال بالنيات'؟",
                        options: ["الترمذي فقط", "البخاري فقط", "البخاري ومسلم", "مسلم فقط"],
                        correct: 2,
                        explanation: "الحديث متفق عليه، رواه البخاري ومسلم"
                    }
                    // Add more questions...
                ],
                comprehensive: []
            },
            tajweed: {
                quick: [
                    {
                        question: "كم عدد حروف الإظهار؟",
                        options: ["5 أحرف", "6 أحرف", "7 أحرف", "8 أحرف"],
                        correct: 1,
                        explanation: "حروف الإظهار ستة: ء ه ع ح غ خ"
                    }
                    // Add more questions...
                ],
                comprehensive: []
            }
        };

        // Game Templates - Ready to be filled with content
        const gameTemplates = {
            alashr: {
                memory: {
                    pairs: [
                        // Template: { arabic: "Arabic text", translation: "Indonesian translation" }
                        { arabic: "وَالْعَصْرِ", translation: "Demi masa" },
                        { arabic: "إِنَّ الْإِنسَانَ لَفِي خُسْرٍ", translation: "Sesungguhnya manusia itu benar-benar dalam kerugian" },
                        // Add more pairs here...
                    ]
                },
                quiz: [
                    // Template: { question: "Question text", options: ["A", "B", "C", "D"], correct: 0, points: 10 }
                    { question: "Berapa jumlah ayat dalam Surah Al-Ashr?", options: ["2", "3", "4", "5"], correct: 1, points: 10 },
                    // Add more questions here...
                ],
                matching: [
                    // Template: { left: "Arabic/Question", right: "Translation/Answer" }
                    { left: "وَالْعَصْرِ", right: "Demi masa" },
                    // Add more matching pairs here...
                ],
                wordPuzzle: [
                    // Template: { word: "WORD", hint: "Hint text", scrambled: "DORW" }
                    { word: "العصر", hint: "Nama surah yang berarti waktu", scrambled: "رصعلا" },
                    // Add more word puzzles here...
                ]
            },
            quraisy: {
                memory: { pairs: [] },
                quiz: [],
                matching: [],
                wordPuzzle: []
            },
            maun: {
                memory: { pairs: [] },
                quiz: [],
                matching: [],
                wordPuzzle: []
            },
            takatsur: {
                memory: { pairs: [] },
                quiz: [],
                matching: [],
                wordPuzzle: []
            },
            hadis_takwa: {
                memory: { pairs: [] },
                quiz: [],
                matching: [],
                wordPuzzle: []
            },
            hadis_niat: {
                memory: { pairs: [] },
                quiz: [],
                matching: [],
                wordPuzzle: []
            },
            tajweed: {
                memory: { pairs: [] },
                quiz: [],
                matching: [],
                wordPuzzle: []
            }
        };

        // Game implementations
        function startMemoryGame(topic) {
            const gameData = gameTemplates[topic]?.memory;
            if (!gameData || gameData.pairs.length === 0) {
                Swal.fire({
                    title: 'لعبة الذاكرة',
                    text: 'Template game sudah siap! Silakan isi data game di dalam kode.',
                    icon: 'info',
                    confirmButtonText: 'حسناً'
                });
                return;
            }
            
            // Memory game implementation would go here
            showGameTemplate('Memory Game', 'Template untuk game mencocokkan pasangan kata Arab dengan terjemahannya');
        }

        function startQuizGame(topic) {
            const gameData = gameTemplates[topic]?.quiz;
            if (!gameData || gameData.length === 0) {
                Swal.fire({
                    title: 'لعبة الأسئلة',
                    text: 'Template game sudah siap! Silakan isi soal-soal quiz di dalam kode.',
                    icon: 'info',
                    confirmButtonText: 'حسناً'
                });
                return;
            }
            
            // Quiz game implementation would go here
            showGameTemplate('Quiz Game', 'Template untuk game kuis dengan pilihan ganda dan sistem poin');
        }

        function startMatchingGame(topic) {
            const gameData = gameTemplates[topic]?.matching;
            if (!gameData || gameData.length === 0) {
                Swal.fire({
                    title: 'لعبة المطابقة',
                    text: 'Template game sudah siap! Silakan isi data matching di dalam kode.',
                    icon: 'info',
                    confirmButtonText: 'حسناً'
                });
                return;
            }
            
            // Matching game implementation would go here
            showGameTemplate('Matching Game', 'Template untuk game mencocokkan teks Arab dengan terjemahannya');
        }

        function startWordPuzzle(topic) {
            const gameData = gameTemplates[topic]?.wordPuzzle;
            if (!gameData || gameData.length === 0) {
                Swal.fire({
                    title: 'لغز الكلمات',
                    text: 'Template game sudah siap! Silakan isi data word puzzle di dalam kode.',
                    icon: 'info',
                    confirmButtonText: 'حسناً'
                });
                return;
            }
            
            // Word puzzle implementation would go here
            showGameTemplate('Word Puzzle', 'Template untuk game menyusun huruf Arab menjadi kata yang benar');
        }

        function startAudioGame(topic) {
            Swal.fire({
                title: 'لعبة الاستماع',
                text: 'Template game sudah siap! Game ini akan memutar audio dan siswa memilih jawaban yang benar.',
                icon: 'info',
                confirmButtonText: 'حسناً'
            });
        }

        function startSpeedChallenge(topic) {
            Swal.fire({
                title: 'تحدي السرعة',
                text: 'Template game sudah siap! Game ini menguji kecepatan siswa menjawab soal dengan timer.',
                icon: 'info',
                confirmButtonText: 'حسناً'
            });
        }

        function showGameTemplate(gameTitle, description) {
            Swal.fire({
                title: gameTitle,
                html: `
                    <div class="text-left">
                        <p class="mb-4">${description}</p>
                        <div class="bg-gray-100 p-4 rounded-lg">
                            <h4 class="font-bold mb-2">Cara mengisi template:</h4>
                            <ol class="list-decimal list-inside space-y-1 text-sm">
                                <li>Buka kode JavaScript</li>
                                <li>Cari object 'gameTemplates'</li>
                                <li>Isi data sesuai format yang sudah disediakan</li>
                                <li>Simpan dan refresh halaman</li>
                            </ol>
                        </div>
                    </div>
                `,
                icon: 'info',
                confirmButtonText: 'Mengerti',
                width: '500px'
            });
        }

        function startQuickEvaluation(topic) {
            const questions = evaluationQuestions[topic]?.quick;
            if (!questions || questions.length === 0) {
                Swal.fire({
                    title: 'الاختبار السريع',
                    text: 'لم يتم إضافة أسئلة لهذا الموضوع بعد',
                    icon: 'info',
                    confirmButtonText: 'حسناً'
                });
                return;
            }
            
            startEvaluation(topic, 'quick', questions);
        }

        function startComprehensiveEvaluation(topic) {
            const questions = evaluationQuestions[topic]?.comprehensive;
            if (!questions || questions.length === 0) {
                Swal.fire({
                    title: 'الاختبار الشامل',
                    text: 'لم يتم إضافة أسئلة شاملة لهذا الموضوع بعد',
                    icon: 'info',
                    confirmButtonText: 'حسناً'
                });
                return;
            }
            
            startEvaluation(topic, 'comprehensive', questions);
        }

        function startEvaluation(topic, type, questions) {
            let currentQuestion = 0;
            let score = 0;
            let answers = [];
            const startTime = Date.now();
            
            function showQuestion() {
                if (currentQuestion >= questions.length) {
                    showResults();
                    return;
                }
                
                const q = questions[currentQuestion];
                const questionNumber = currentQuestion + 1;
                const totalQuestions = questions.length;
                
                if (q.type === 'text') {
                    // Text input question
                    Swal.fire({
                        title: `السؤال ${questionNumber} من ${totalQuestions}`,
                        text: q.question,
                        input: 'text',
                        inputPlaceholder: 'اكتب إجابتك هنا...',
                        showCancelButton: true,
                        confirmButtonText: 'التالي',
                        cancelButtonText: 'إلغاء',
                        inputValidator: (value) => {
                            if (!value) {
                                return 'يرجى كتابة الإجابة'
                            }
                        }
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const isCorrect = result.value.trim().toLowerCase() === q.answer.toLowerCase();
                            if (isCorrect) score++;
                            answers.push({
                                question: q.question,
                                userAnswer: result.value,
                                correctAnswer: q.answer,
                                isCorrect: isCorrect,
                                explanation: q.explanation
                            });
                            currentQuestion++;
                            showQuestion();
                        }
                    });
                } else {
                    // Multiple choice question
                    const optionsHtml = q.options.map((option, index) => 
                        `<button class="swal2-styled swal2-confirm w-full mb-2 text-right" onclick="selectAnswer(${index})">${option}</button>`
                    ).join('');
                    
                    Swal.fire({
                        title: `السؤال ${questionNumber} من ${totalQuestions}`,
                        html: `
                            <div class="text-right mb-4">
                                <p class="text-lg font-semibold">${q.question}</p>
                            </div>
                            <div class="space-y-2">
                                ${q.options.map((option, index) => 
                                    `<button class="w-full p-3 text-right bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors" onclick="selectAnswer(${index})">${option}</button>`
                                ).join('')}
                            </div>
                        `,
                        showConfirmButton: false,
                        showCancelButton: true,
                        cancelButtonText: 'إلغاء الاختبار'
                    });
                    
                    window.selectAnswer = function(selectedIndex) {
                        const isCorrect = selectedIndex === q.correct;
                        if (isCorrect) score++;
                        
                        answers.push({
                            question: q.question,
                            userAnswer: q.options[selectedIndex],
                            correctAnswer: q.options[q.correct],
                            isCorrect: isCorrect,
                            explanation: q.explanation
                        });
                        
                        // Show immediate feedback
                        Swal.fire({
                            title: isCorrect ? 'إجابة صحيحة!' : 'إجابة خاطئة',
                            text: q.explanation,
                            icon: isCorrect ? 'success' : 'error',
                            timer: 2000,
                            showConfirmButton: false
                        }).then(() => {
                            currentQuestion++;
                            showQuestion();
                        });
                    };
                }
            }
            
            function showResults() {
                const endTime = Date.now();
                const timeSpent = Math.round((endTime - startTime) / 1000);
                const
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9762060df60ef928',t:'MTc1NjM2NTM5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
