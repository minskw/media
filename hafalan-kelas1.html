<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Hafalan Surat Pendek-Kelas 1</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/128/3165/3165231.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Nunito:wght@400;600;700;800&display=swap');
        
        body { 
            font-family: 'Nunito', sans-serif; 
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .arabic-text {
            font-family: 'Amiri', serif;
            direction: rtl;
            text-align: right;
            line-height: 2;
        }
        
        .title-font { font-family: 'Amiri', serif; }
        
        .surah-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .surah-card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .verse-line {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .verse-line:hover {
            background: linear-gradient(135deg, #F0FDF4, #DCFCE7);
            transform: translateX(5px);
        }
        
        .verse-line.active {
            background: linear-gradient(135deg, #DCFCE7, #BBF7D0);
            border-left: 4px solid #059669;
        }
        
        .btn-islamic {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transition: all 0.2s ease;
        }
        
        .btn-islamic:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(5, 150, 105, 0.4);
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #10B981, #059669);
            transition: width 0.5s ease;
        }
        
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .memorization-progress {
            background: linear-gradient(90deg, #10B981, #059669);
            height: 8px;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .verse-number {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .difficulty-badge {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 600;
        }
        
        .difficulty-easy { background: #DCFCE7; color: #166534; }
        
        .star-rating {
            color: #FCD34D;
            font-size: 18px;
        }
        
        .achievement-badge {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .verse-highlight {
            background: linear-gradient(135deg, #DCFCE7, #BBF7D0);
            border-left: 4px solid #059669;
            animation: highlight 0.5s ease;
        }
        
        @keyframes highlight {
            0% { background: #10B981; }
            100% { background: linear-gradient(135deg, #DCFCE7, #BBF7D0); }
        }
        
        /* Mobile First Responsive Design */
        @media (max-width: 640px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .grid-cols-2 {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
            
            .text-3xl {
                font-size: 1.5rem;
            }
            
            .text-2xl {
                font-size: 1.25rem;
            }
            
            .p-8 {
                padding: 1rem;
            }
        }
        
        /* YouTube Audio Player Styles */
        .youtube-audio-player {
            background: linear-gradient(135deg, #F0FDF4, #DCFCE7);
            border: 2px solid #059669;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .audio-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .audio-btn {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            border: none;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 18px;
        }
        
        .audio-btn:hover {
            background: linear-gradient(135deg, #047857, #065f46);
            transform: scale(1.1);
        }
        
        .audio-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        
        .audio-progress {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .audio-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10B981, #059669);
            width: 0%;
            transition: width 0.1s ease;
        }
        
        .audio-time {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #047857;
            margin-top: 8px;
            font-weight: 600;
        }
        
        /* Grade 1 Specific Styles */
        .grade1-card {
            background: linear-gradient(135deg, #F0FDF4, #DCFCE7);
            border: 3px solid #059669;
        }
        
        .grade1-header {
            background: linear-gradient(135deg, #059669, #047857);
        }
        
        .big-number {
            font-size: 3rem;
            font-weight: bold;
            color: #DCFCE7;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        /* Home Button Styles */
        .home-btn {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
        }
        
        .home-btn:hover {
            background: linear-gradient(135deg, #047857, #065f46);
            transform: scale(1.1);
        }
        
        /* Verses Container */
        .verses-container {
            background: linear-gradient(135deg, #F0FDF4, #DCFCE7);
            border: 2px solid #059669;
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
        }
        
        .verse-item {
            background: white;
            border: 1px solid #BBF7D0;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }
        
        .verse-item:hover {
            background: #F0FDF4;
            border-color: #059669;
            transform: translateY(-2px);
        }

        /* Inline Audio Button Styles */
        .verse-audio-btn {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .verse-audio-btn:hover {
            background: linear-gradient(135deg, #047857, #065f46);
            transform: scale(1.1);
        }
        
        .verse-audio-btn.playing {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .verse-audio-btn.paused {
            background: linear-gradient(135deg, #6b7280, #4b5563);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 min-h-screen">
    <!-- Header -->
    <header class="grade1-header text-white shadow-2xl">
        <div class="container mx-auto px-2 sm:px-4 py-4 sm:py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 float">
                        <img src="https://archive.org/download/vecteezy_mother-and-child-reading-the-al-qur-an_14703708-1-removebg-preview/vecteezy_mother-and-child-reading-the-al-qur-an_14703708-1-removebg-preview.png" 
                             alt="Al-Quran Logo" 
                             class="w-full h-full object-contain"
                             onerror="this.src=''; this.alt='Logo gagal dimuat'; this.style.display='none';">
                    </div>
                    <div>
                        <h1 class="text-lg sm:text-2xl md:text-3xl font-bold title-font">Al-Quran Pedomanku</h1>
                        <p class="text-yellow-100 text-xs sm:text-sm md:text-base">Hafalan Surah Pendek Kelas 1</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2 sm:space-x-4">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 rounded-full overflow-hidden border-3 border-white shadow-lg cursor-pointer" onclick="editProfile()">
                        <img id="profilePhoto" 
                             src="https://cdn-icons-png.flaticon.com/128/3135/3135715.png" 
                             alt="Foto Profil" 
                             class="w-full h-full object-cover"
                             onerror="this.src='https://cdn-icons-png.flaticon.com/128/3135/3135715.png';">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-2 sm:px-4 py-4 sm:py-8">
        <!-- Welcome Section -->
        <div class="text-center mb-8 sm:mb-12">
            <div class="grade1-card rounded-2xl shadow-xl p-4 sm:p-8 mb-4 sm:mb-8">
                <div class="text-4xl sm:text-6xl mb-4 float text-orange-600">
                    <i class="fas fa-quran"></i>
                </div>
                <h2 class="text-xl sm:text-3xl font-bold text-gray-800 mb-4 title-font">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</h2>
                <p class="text-gray-700 text-sm sm:text-lg font-semibold">Selamat Belajar Adik-Adik Kelas 1! ğŸŒŸ</p>
                <p class="text-gray-600 text-xs sm:text-base">Mari belajar menghafal 5 surat pendek dengan mudah dan menyenangkan!</p>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4 mb-4 sm:mb-8">
            <div class="bg-white rounded-xl shadow-lg p-3 sm:p-4 text-center border-2 border-emerald-200">
                <div class="text-2xl sm:text-3xl text-emerald-600 mb-2"><i class="fas fa-book-open"></i></div>
                <div class="text-lg sm:text-2xl font-bold text-gray-800" id="totalSurah">0</div>
                <div class="text-xs sm:text-sm text-gray-600">Surat Dihafal</div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-3 sm:p-4 text-center border-2 border-emerald-200">
                <div class="text-2xl sm:text-3xl text-green-600 mb-2"><i class="fas fa-star"></i></div>
                <div class="text-lg sm:text-2xl font-bold text-gray-800" id="totalPoints">0</div>
                <div class="text-xs sm:text-sm text-gray-600">Poin</div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-3 sm:p-4 text-center border-2 border-emerald-200">
                <div class="text-2xl sm:text-3xl text-teal-600 mb-2"><i class="fas fa-fire"></i></div>
                <div class="text-lg sm:text-2xl font-bold text-gray-800" id="streakDays">0</div>
                <div class="text-xs sm:text-sm text-gray-600">Hari Berturut</div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-3 sm:p-4 text-center border-2 border-emerald-200">
                <div class="text-2xl sm:text-3xl text-emerald-600 mb-2"><i class="fas fa-trophy"></i></div>
                <div class="text-lg sm:text-2xl font-bold text-gray-800" id="achievements">0</div>
                <div class="text-xs sm:text-sm text-gray-600">Pencapaian</div>
            </div>
        </div>

        <!-- Content Area -->
        <div id="contentArea" class="bg-white rounded-2xl shadow-xl p-4 sm:p-8 min-h-96 border-2 border-emerald-200">
            <!-- Surah List for Grade 1 -->
            <div class="mb-4 sm:mb-6">
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-4">
                    <i class="fas fa-list text-emerald-600 mr-2 sm:mr-3"></i>5 Surat untuk Kelas 1
                </h3>
                <p class="text-gray-600 text-sm sm:text-base">Klik surat yang ingin dipelajari dan dengarkan audionya! ğŸ§</p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6" id="surahGrid">
                <!-- Surah cards will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-gray-800 via-gray-900 to-black text-white mt-8 sm:mt-16">
        <div class="container mx-auto px-2 sm:px-4 py-8 sm:py-12">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-3 mb-4">
                    <div class="text-2xl sm:text-3xl text-emerald-400">
                        <i class="fas fa-mosque"></i>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold title-font">Hafalan Surat Pendek - Kelas 1</h3>
                </div>
                <p class="text-gray-300 mb-4 text-sm sm:text-base">
                    Belajar menghafal Al-Qur'an dengan mudah dan menyenangkan untuk adik-adik kelas 1
                </p>
                <p class="text-gray-400 text-xs sm:text-sm">
                    Â© 2025 Dibuat dengan <i class="fas fa-heart text-red-500"></i> oleh: MAHFUD SIDIK
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        let currentUser = null;
        let userProgress = {};
        let currentSurah = null;
        let currentAudio = null;

        // Grade 1 Surah data with YouTube links
        const grade1SurahData = [
            {
                id: 1, 
                name: 'Ø§Ù„ÙØ§ØªØ­Ø©', 
                transliteration: 'Al-Fatihah', 
                translation: 'Pembuka', 
                verses: 7, 
                difficulty: 'easy',
                audioUrl: 'https://archive.org/download/ssvid.net--Murottal-Al-Fatihah-Metode-Ummi/ssvid.net--Murottal-Al-Fatihah-Metode-Ummi.mp3',
                color: 'from-emerald-400 to-emerald-600',
                hasDetailedAudio: true,
                taawudz: {
                    text: 'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù',
                    transliteration: "A'udzu billahi minasy-syaitanir-rajim",
                    translation: 'Aku berlindung kepada Allah dari godaan syaitan yang terkutuk',
                    audioUrl: 'https://archive.org/download/fatihah-ayat-7/taawudz.mp3'
                },
                arabic: [
                    'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù',
                    'Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù',
                    'Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù',
                    'Ù…ÙØ§Ù„ÙÙƒÙ ÙŠÙÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù',
                    'Ø¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ³Ù’ØªÙØ¹ÙÙŠÙ†Ù',
                    'Ø§Ù‡Ù’Ø¯ÙÙ†ÙØ§ Ø§Ù„ØµÙÙ‘Ø±ÙØ§Ø·Ù Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙÙ‚ÙÙŠÙ…Ù',
                    'ØµÙØ±ÙØ§Ø·Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø£ÙÙ†Ù’Ø¹ÙÙ…Ù’ØªÙ Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙÙ„ÙØ§ Ø§Ù„Ø¶ÙÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†Ù'
                ],
                verseAudios: [
					'https://archive.org/download/114-5/BASMALAH.mp3', // Ayat 1 (Basmalah)
                    'https://archive.org/download/fatihah-ayat-1/fatihah%20ayat1.mp3', // Ayat 1 (Basmalah)
                    'https://archive.org/download/fatihah-ayat-7/Fatihah%20Ayat%202.mp3', // Ayat 2
                    'https://archive.org/download/fatihah-ayat-7/Fatihah%20Ayat%203.mp3', // Ayat 3
                    'https://archive.org/download/fatihah-ayat-7/Fatihah%20Ayat%204.mp3', // Ayat 4
                    'https://archive.org/download/fatihah-ayat-7/Fatihah%20Ayat%205.mp3', // Ayat 5
                    'https://archive.org/download/fatihah-ayat-7/Fatihah%20Ayat%206.mp3', // Ayat 6
                    'https://archive.org/download/fatihah-ayat-7/Fatihah%20Ayat%207.mp3'  // Ayat 7
                ]
            },
            {
                id: 114, 
                name: 'Ø§Ù„Ù†Ø§Ø³', 
                transliteration: 'An-Nas', 
                translation: 'Manusia', 
                verses: 6, 
                difficulty: 'easy',
                audioUrl: 'https://archive.org/download/murottal-anak-juz-30-metode-ummi/Metode-Ummi-114-An-Naas.mp3',
                color: 'from-green-400 to-green-600',
                taawudz: {
                    text: 'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù',
                    transliteration: "A'udzu billahi minasy-syaitanir-rajim",
                    translation: 'Aku berlindung kepada Allah dari godaan syaitan yang terkutuk',
                    audioUrl: 'https://archive.org/download/fatihah-ayat-7/taawudz.mp3'
                },
                arabic: [
                    'Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù',
                    'Ù…ÙÙ„ÙÙƒÙ Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù',
                    'Ø¥ÙÙ„ÙÙ‡Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù',
                    'Ù…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ Ø§Ù„Ù’ÙˆÙØ³Ù’ÙˆÙØ§Ø³Ù Ø§Ù„Ù’Ø®ÙÙ†ÙÙ‘Ø§Ø³Ù',
                    'Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙŠÙÙˆÙØ³Ù’ÙˆÙØ³Ù ÙÙÙŠ ØµÙØ¯ÙÙˆØ±Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù',
                    'Ù…ÙÙ†Ù Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù ÙˆÙØ§Ù„Ù†ÙÙ‘Ø§Ø³Ù'
                ],
                verseAudios: [
                    'https://archive.org/download/114-5/114-1.mp3', // Ayat 1
                    'https://archive.org/download/114-5/114-2.mp3', // Ayat 2
                    'https://archive.org/download/114-5/114-3.mp3', // Ayat 3
                    'https://archive.org/download/114-5/114-4.mp3', // Ayat 4
                    'https://archive.org/download/114-5/114-5.mp3', // Ayat 5
                    'https://archive.org/download/114-5/114-6.mp3'  // Ayat 6
                ]
            },
            {
                id: 113, 
                name: 'Ø§Ù„ÙÙ„Ù‚', 
                transliteration: 'Al-Falaq', 
                translation: 'Waktu Subuh', 
                verses: 5, 
                difficulty: 'easy',
                audioUrl: 'https://archive.org/download/murottal-anak-juz-30-metode-ummi/Metode-Ummi-113-Al-Falaq.mp3',
                color: 'from-teal-400 to-teal-600',
                taawudz: {
                    text: 'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù',
                    transliteration: "A'udzu billahi minasy-syaitanir-rajim",
                    translation: 'Aku berlindung kepada Allah dari godaan syaitan yang terkutuk',
                    audioUrl: 'https://archive.org/download/fatihah-ayat-7/taawudz.mp3'
                },
                arabic: [
                    'Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù’ÙÙÙ„ÙÙ‚Ù',
                    'Ù…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ Ù…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù',
                    'ÙˆÙÙ…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ ØºÙØ§Ø³ÙÙ‚Ù Ø¥ÙØ°ÙØ§ ÙˆÙÙ‚ÙØ¨Ù',
                    'ÙˆÙÙ…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ Ø§Ù„Ù†ÙÙ‘ÙÙÙ‘Ø§Ø«ÙØ§ØªÙ ÙÙÙŠ Ø§Ù„Ù’Ø¹ÙÙ‚ÙØ¯Ù',
                    'ÙˆÙÙ…ÙÙ†Ù’ Ø´ÙØ±ÙÙ‘ Ø­ÙØ§Ø³ÙØ¯Ù Ø¥ÙØ°ÙØ§ Ø­ÙØ³ÙØ¯Ù'
                ]
            },
            {
                id: 112, 
                name: 'Ø§Ù„Ø¥Ø®Ù„Ø§Øµ', 
                transliteration: 'Al-Ikhlas', 
                translation: 'Keikhlasan', 
                verses: 4, 
                difficulty: 'easy',
                audioUrl: 'https://archive.org/download/murottal-anak-juz-30-metode-ummi/Metode-Ummi-112-Al-Ikhlash.mp3',
                color: 'from-emerald-500 to-green-600',
                taawudz: {
                    text: 'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù',
                    transliteration: "A'udzu billahi minasy-syaitanir-rajim",
                    translation: 'Aku berlindung kepada Allah dari godaan syaitan yang terkutuk',
                    audioUrl: 'https://archive.org/download/fatihah-ayat-7/taawudz.mp3'
                },
                arabic: [
                    'Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ',
                    'Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ØµÙÙ‘Ù…ÙØ¯Ù',
                    'Ù„ÙÙ…Ù’ ÙŠÙÙ„ÙØ¯Ù’ ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙˆÙ„ÙØ¯Ù’',
                    'ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙƒÙÙ†Ù’ Ù„ÙÙ‡Ù ÙƒÙÙÙÙˆÙ‹Ø§ Ø£ÙØ­Ø¯ÙŒ'
                ]
            },
            {
                id: 111, 
                name: 'Ø§Ù„Ù…Ø³Ø¯', 
                transliteration: 'Al-Masad (Al-Lahab)', 
                translation: 'Sabut/Api yang Menyala', 
                verses: 5, 
                difficulty: 'easy',
                audioUrl: 'https://archive.org/download/murottal-anak-juz-30-metode-ummi/Metode-Ummi-111-Al-Lahb.mp3',
                color: 'from-green-500 to-emerald-700',
                taawudz: {
                    text: 'Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘ÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø¬ÙÙŠÙ…Ù',
                    transliteration: "A'udzu billahi minasy-syaitanir-rajim",
                    translation: 'Aku berlindung kepada Allah dari godaan syaitan yang terkutuk',
                    audioUrl: 'https://archive.org/download/fatihah-ayat-7/taawudz.mp3'
                },
                arabic: [
                    'ØªÙØ¨ÙÙ‘ØªÙ’ ÙŠÙØ¯ÙØ§ Ø£ÙØ¨ÙÙŠ Ù„ÙÙ‡ÙØ¨Ù ÙˆÙØªÙØ¨ÙÙ‘',
                    'Ù…ÙØ§ Ø£ÙØºÙ’Ù†ÙÙ‰ Ø¹ÙÙ†Ù’Ù‡Ù Ù…ÙØ§Ù„ÙÙ‡Ù ÙˆÙÙ…ÙØ§ ÙƒÙØ³ÙØ¨Ù',
                    'Ø³ÙÙŠÙØµÙ’Ù„ÙÙ‰ Ù†ÙØ§Ø±Ù‹Ø§ Ø°ÙØ§ØªÙ Ù„ÙÙ‡ÙØ¨Ù',
                    'ÙˆÙØ§Ù…Ù’Ø±ÙØ£ÙØªÙÙ‡Ù Ø­ÙÙ…ÙÙ‘Ø§Ù„ÙØ©Ù Ø§Ù„Ù’Ø­ÙØ·ÙØ¨Ù',
                    'ÙÙÙŠ Ø¬ÙÙŠØ¯ÙÙ‡ÙØ§ Ø­ÙØ¨Ù’Ù„ÙŒ Ù…ÙÙ†Ù’ Ù…ÙØ³ÙØ¯Ù'
                ]
            }
        ];

        // Utility functions
        function saveToLocalStorage(key, data) {
            try {
                localStorage.setItem(key, JSON.stringify(data));
                return true;
            } catch (error) {
                console.error('Error saving to localStorage:', error);
                return false;
            }
        }

        function loadFromLocalStorage(key, defaultValue = null) {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : defaultValue;
            } catch (error) {
                console.error('Error loading from localStorage:', error);
                return defaultValue;
            }
        }

        // Initialize app
        function initializeApp() {
            currentUser = loadFromLocalStorage('grade1User', {
                name: 'Siswa Kelas 1',
                level: 'Pemula',
                points: 0,
                streak: 0,
                achievements: [],
                profilePhoto: 'https://cdn-icons-png.flaticon.com/128/3135/3135715.png'
            });

            userProgress = loadFromLocalStorage('grade1Progress', {});
            
            // Load saved profile photo
            const profilePhoto = document.getElementById('profilePhoto');
            if (profilePhoto && currentUser.profilePhoto) {
                profilePhoto.src = currentUser.profilePhoto;
            }
            
            updateStatistics();
            showSurahList();
        }

        // Profile editing function
        function editProfile() {
            Swal.fire({
                title: 'ğŸ“¸ Edit Profil',
                html: `
                    <div class="text-center mb-4">
                        <div class="w-24 h-24 mx-auto rounded-full overflow-hidden border-4 border-emerald-500 mb-4">
                            <img id="previewPhoto" src="${currentUser.profilePhoto}" alt="Preview" class="w-full h-full object-cover">
                        </div>
                        <p class="text-gray-600 mb-4">Pilih foto profil baru atau masukkan URL gambar</p>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-left text-sm font-semibold text-gray-700 mb-2">Nama Siswa:</label>
                            <input type="text" id="studentName" value="${currentUser.name}" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-emerald-500"
                                   placeholder="Masukkan nama siswa">
                        </div>
                        
                        <div>
                            <label class="block text-left text-sm font-semibold text-gray-700 mb-2">Pilih Foto dari Komputer:</label>
                            <input type="file" id="photoFile" accept="image/*" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-emerald-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100"
                                   onchange="previewSelectedPhoto()">
                            <p class="text-xs text-gray-500 mt-1">Pilih file gambar (JPG, PNG, GIF)</p>
                        </div>
                        
                        <div class="text-left">
                            <p class="text-sm text-gray-600 mb-2">Atau pilih dari foto default:</p>
                            <div class="grid grid-cols-4 gap-2">
                                <img src="https://cdn-icons-png.flaticon.com/128/3135/3135715.png" 
                                     class="w-12 h-12 rounded-full border-2 border-gray-300 cursor-pointer hover:border-emerald-500" 
                                     onclick="selectDefaultPhoto('https://cdn-icons-png.flaticon.com/128/3135/3135715.png')">
                                <img src="https://cdn-icons-png.flaticon.com/128/3135/3135768.png" 
                                     class="w-12 h-12 rounded-full border-2 border-gray-300 cursor-pointer hover:border-emerald-500" 
                                     onclick="selectDefaultPhoto('https://cdn-icons-png.flaticon.com/128/3135/3135768.png')">
                                <img src="https://cdn-icons-png.flaticon.com/128/924/924874.png" 
                                     class="w-12 h-12 rounded-full border-2 border-gray-300 cursor-pointer hover:border-emerald-500" 
                                     onclick="selectDefaultPhoto('https://cdn-icons-png.flaticon.com/128/924/924874.png')">
                                <img src="https://cdn-icons-png.flaticon.com/128/924/924915.png" 
                                     class="w-12 h-12 rounded-full border-2 border-gray-300 cursor-pointer hover:border-emerald-500" 
                                     onclick="selectDefaultPhoto('https://cdn-icons-png.flaticon.com/128/924/924915.png')">
                            </div>
                        </div>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: 'Simpan',
                cancelButtonText: 'Batal',
                confirmButtonColor: '#059669',
                cancelButtonColor: '#6b7280',
                width: '500px',
                preConfirm: () => {
                    const name = document.getElementById('studentName').value.trim();
                    const photoFile = document.getElementById('photoFile');
                    const previewPhoto = document.getElementById('previewPhoto');
                    
                    if (!name) {
                        Swal.showValidationMessage('Nama siswa tidak boleh kosong');
                        return false;
                    }
                    
                    // Get photo source (either from file or default selection)
                    const photoUrl = previewPhoto ? previewPhoto.src : 'https://cdn-icons-png.flaticon.com/128/3135/3135715.png';
                    
                    return { name, photoUrl };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const { name, photoUrl } = result.value;
                    
                    // Update user data
                    currentUser.name = name;
                    currentUser.profilePhoto = photoUrl || 'https://cdn-icons-png.flaticon.com/128/3135/3135715.png';
                    
                    // Save to localStorage
                    saveToLocalStorage('grade1User', currentUser);
                    
                    // Update profile photo in header
                    const profilePhoto = document.getElementById('profilePhoto');
                    if (profilePhoto) {
                        profilePhoto.src = currentUser.profilePhoto;
                    }
                    
                    Swal.fire({
                        title: 'âœ… Berhasil!',
                        text: 'Profil berhasil diperbarui',
                        icon: 'success',
                        confirmButtonColor: '#059669',
                        timer: 2000
                    });
                }
            });
        }

        // Preview selected photo function
        function previewSelectedPhoto() {
            const photoFile = document.getElementById('photoFile');
            const previewPhoto = document.getElementById('previewPhoto');
            
            if (photoFile && photoFile.files && photoFile.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    if (previewPhoto) {
                        previewPhoto.src = e.target.result;
                    }
                };
                reader.readAsDataURL(photoFile.files[0]);
            }
        }

        // Select default photo function
        function selectDefaultPhoto(photoUrl) {
            const photoFile = document.getElementById('photoFile');
            const previewPhoto = document.getElementById('previewPhoto');
            
            // Clear file input when selecting default photo
            if (photoFile) {
                photoFile.value = '';
            }
            
            if (previewPhoto) {
                previewPhoto.src = photoUrl;
            }
            
            // Update border styling
            document.querySelectorAll('.grid img').forEach(img => {
                img.classList.remove('border-emerald-500');
                img.classList.add('border-gray-300');
            });
            
            event.target.classList.remove('border-gray-300');
            event.target.classList.add('border-emerald-500');
        }

        // Update statistics
        function updateStatistics() {
            const totalSurah = Object.keys(userProgress).filter(id => userProgress[id].memorized).length;
            const totalPoints = currentUser.points;
            const streakDays = currentUser.streak;
            const achievements = currentUser.achievements.length;

            document.getElementById('totalSurah').textContent = totalSurah;
            document.getElementById('totalPoints').textContent = totalPoints;
            document.getElementById('streakDays').textContent = streakDays;
            document.getElementById('achievements').textContent = achievements;
        }

        // Show Surah List
        function showSurahList() {
            // Reset content area to show the main surah list
            const contentArea = document.getElementById('contentArea');
            contentArea.innerHTML = `
                <!-- Surah List for Grade 1 -->
                <div class="mb-4 sm:mb-6">
                    <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-4">
                        <i class="fas fa-list text-emerald-600 mr-2 sm:mr-3"></i>5 Surat untuk Kelas 1
                    </h3>
                    <p class="text-gray-600 text-sm sm:text-base">Klik surat yang ingin dipelajari dan dengarkan audionya! ğŸ§</p>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6" id="surahGrid">
                    <!-- Surah cards will be loaded here -->
                </div>
            `;

            const surahGrid = document.getElementById('surahGrid');
            surahGrid.innerHTML = '';

            grade1SurahData.forEach(surah => {
                const progress = userProgress[surah.id] || { memorized: false, progress: 0 };
                const progressPercentage = progress.progress || 0;
                const isMemorized = progress.memorized || false;

                surahGrid.innerHTML += `
                    <div class="surah-card grade1-card rounded-2xl shadow-lg p-4 sm:p-6 border-2 border-emerald-300" onclick="showSurahDetail(${surah.id})">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-2">
                                <div class="big-number text-emerald-800">${surah.id === 1 ? 'Ù¡' : surah.id}</div>
                                <div>
                                    <h4 class="text-lg sm:text-xl font-bold text-gray-800 title-font">${surah.name}</h4>
                                    <p class="text-sm text-gray-600">${surah.transliteration}</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="difficulty-badge difficulty-${surah.difficulty}">Mudah</span>
                                <div class="star-rating mt-1">
                                    ${isMemorized ? '<i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>' : '<i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>'}
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-700 mb-4 text-sm sm:text-base">${surah.translation} (${surah.verses} Ayat)</p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="memorization-progress rounded-full" style="width: ${progressPercentage}%"></div>
                        </div>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-xs text-gray-600">${Math.round(progressPercentage)}% dihafal</span>
                            <button class="bg-emerald-500 hover:bg-emerald-600 text-white text-xs px-3 py-1 rounded-full transition duration-200" onclick="event.stopPropagation(); playSurahAudio(${surah.id})">
                                <i class="fas fa-play mr-1"></i> Dengarkan
                            </button>
                        </div>
                    </div>
                `;
            });
        }

        // Show Surah Detail
        function showSurahDetail(surahId) {
            const surah = grade1SurahData.find(s => s.id === surahId);
            if (!surah) return;

            currentSurah = surah;
            const progress = userProgress[surah.id] || { memorized: false, progress: 0, verses: {} };
            
            // Create the surah detail content
            const contentArea = document.getElementById('contentArea');
            contentArea.innerHTML = `
                <div class="mb-6">
                    <button class="home-btn mb-4" onclick="showSurahList()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 title-font">${surah.name}</h2>
                            <p class="text-gray-600">${surah.transliteration} - ${surah.translation}</p>
                        </div>
                        <div class="text-right">
                            <span class="difficulty-badge difficulty-${surah.difficulty}">Mudah</span>
                            <div class="star-rating mt-1">
                                ${progress.memorized ? '<i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>' : '<i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>'}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Audio Player -->
                <div class="youtube-audio-player mb-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">
                        <i class="fas fa-music text-emerald-600 mr-2"></i>Dengarkan Surat
                    </h3>
                    <div class="audio-controls">
                        <button class="audio-btn" onclick="playSurahAudio(${surah.id})">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="audio-btn" onclick="pauseSurahAudio()">
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="audio-btn" onclick="stopSurahAudio()">
                            <i class="fas fa-stop"></i>
                        </button>
                    </div>
                    <div class="audio-progress">
                        <div id="audioProgressBar" class="audio-progress-bar"></div>
                    </div>
                    <div class="audio-time">
                        <span id="currentTime">00:00</span>
                        <span id="duration">00:00</span>
                    </div>
                </div>

                <!-- Taawudz Section -->
                <div class="verses-container mb-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">
                        <i class="fas fa-star text-emerald-600 mr-2"></i>Ta'awwudz
                    </h3>
                    <div class="verse-item">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <p class="arabic-text text-2xl mb-2">${surah.taawudz.text}</p>
                                <p class="text-gray-700 italic mb-1">${surah.taawudz.transliteration}</p>
                                <p class="text-gray-600">${surah.taawudz.translation}</p>
                            </div>
                            <button class="verse-audio-btn ml-4" onclick="playVerseAudio('${surah.taawudz.audioUrl}', this)">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Verses Section -->
                <div class="verses-container">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">
                        <i class="fas fa-book text-emerald-600 mr-2"></i>Ayat-ayat (${surah.verses} Ayat)
                    </h3>
                    <div id="versesList">
                        <!-- Verses will be loaded here -->
                    </div>
                </div>
            `;

            // Load verses
            const versesList = document.getElementById('versesList');
            versesList.innerHTML = '';

            surah.arabic.forEach((verse, index) => {
                const verseNumber = index + 1;
                const verseProgress = progress.verses && progress.verses[verseNumber] || { memorized: false };
                
                versesList.innerHTML += `
                    <div class="verse-item ${verseProgress.memorized ? 'bg-green-50' : ''}" id="verse-${verseNumber}">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="flex items-center mb-2">
                                    <div class="verse-number">${verseNumber}</div>
                                    <span class="ml-3 text-sm text-gray-500">${verseProgress.memorized ? '<i class="fas fa-check text-green-500"></i> Terhafal' : 'Belum dihafal'}</span>
                                </div>
                                <p class="arabic-text text-xl sm:text-2xl mb-2">${verse}</p>
                                <button class="text-emerald-600 text-sm font-semibold mt-2" onclick="toggleMemorized(${verseNumber})">
                                    ${verseProgress.memorized ? '<i class="fas fa-check-circle"></i> Tandai Belum Dihafal' : '<i class="far fa-circle"></i> Tandai Sudah Dihafal'}
                                </button>
                            </div>
                            ${surah.verseAudios && surah.verseAudios[index] ? 
                            `<button class="verse-audio-btn ml-4" onclick="playVerseAudio('${surah.verseAudios[index]}', this)">
                                <i class="fas fa-play"></i>
                            </button>` : ''}
                        </div>
                    </div>
                `;
            });

            // Initialize audio for the surah
            initSurahAudio(surah);
        }

        // Initialize surah audio
        function initSurahAudio(surah) {
            // This function would set up the audio player for the surah
            // For now, we'll just set the audio URL
        }

        // Play surah audio
        function playSurahAudio(surahId) {
            const surah = grade1SurahData.find(s => s.id === surahId);
            if (!surah) return;

            // Stop any currently playing audio
            stopSurahAudio();

            // Create new audio element
            currentAudio = new Audio(surah.audioUrl);
            
            // Set up event listeners
            currentAudio.addEventListener('loadedmetadata', function() {
                document.getElementById('duration').textContent = formatTime(currentAudio.duration);
            });
            
            currentAudio.addEventListener('timeupdate', function() {
                const progress = (currentAudio.currentTime / currentAudio.duration) * 100;
                document.getElementById('audioProgressBar').style.width = progress + '%';
                document.getElementById('currentTime').textContent = formatTime(currentAudio.currentTime);
            });
            
            currentAudio.addEventListener('ended', function() {
                document.getElementById('audioProgressBar').style.width = '0%';
                document.getElementById('currentTime').textContent = '00:00';
                currentAudio = null;
            });
            
            // Play the audio
            currentAudio.play().catch(error => {
                console.error('Error playing audio:', error);
                Swal.fire({
                    title: 'âš ï¸ Perhatian',
                    text: 'Tidak dapat memutar audio. Pastikan koneksi internet Anda stabil.',
                    icon: 'warning',
                    confirmButtonColor: '#059669'
                });
            });
        }

        // Pause surah audio
        function pauseSurahAudio() {
            if (currentAudio && !currentAudio.paused) {
                currentAudio.pause();
            }
        }

        // Stop surah audio
        function stopSurahAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
                document.getElementById('audioProgressBar').style.width = '0%';
                document.getElementById('currentTime').textContent = '00:00';
            }
        }

        // Format time for audio player
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return mins.toString().padStart(2, '0') + ':' + secs.toString().padStart(2, '0');
        }

        // Play verse audio
        function playVerseAudio(audioUrl, buttonElement) {
            // Stop any currently playing verse audio
            const allVerseButtons = document.querySelectorAll('.verse-audio-btn');
            allVerseButtons.forEach(btn => {
                if (btn !== buttonElement) {
                    btn.classList.remove('playing', 'paused');
                    btn.innerHTML = '<i class="fas fa-play"></i>';
                }
            });

            // If this verse is already playing, pause it
            if (buttonElement.classList.contains('playing')) {
                if (currentAudio) {
                    currentAudio.pause();
                    buttonElement.classList.remove('playing');
                    buttonElement.classList.add('paused');
                    buttonElement.innerHTML = '<i class="fas fa-play"></i>';
                }
                return;
            }

            // If this verse is paused, resume it
            if (buttonElement.classList.contains('paused')) {
                if (currentAudio) {
                    currentAudio.play();
                    buttonElement.classList.remove('paused');
                    buttonElement.classList.add('playing');
                    buttonElement.innerHTML = '<i class="fas fa-pause"></i>';
                }
                return;
            }

            // Stop any surah audio that might be playing
            stopSurahAudio();

            // Create new audio for the verse
            currentAudio = new Audio(audioUrl);
            
            // Update button state
            buttonElement.classList.add('playing');
            buttonElement.innerHTML = '<i class="fas fa-pause"></i>';
            
            // Set up event listeners
            currentAudio.addEventListener('ended', function() {
                buttonElement.classList.remove('playing', 'paused');
                buttonElement.innerHTML = '<i class="fas fa-play"></i>';
                currentAudio = null;
            });
            
            // Play the audio
            currentAudio.play().catch(error => {
                console.error('Error playing verse audio:', error);
                buttonElement.classList.remove('playing', 'paused');
                buttonElement.innerHTML = '<i class="fas fa-play"></i>';
                
                Swal.fire({
                    title: 'âš ï¸ Perhatian',
                    text: 'Tidak dapat memutar audio. Pastikan koneksi internet Anda stabil.',
                    icon: 'warning',
                    confirmButtonColor: '#059669'
                });
            });
        }

        // Toggle memorized status for a verse
        function toggleMemorized(verseNumber) {
            if (!currentSurah) return;
            
            const progress = userProgress[currentSurah.id] || { memorized: false, progress: 0, verses: {} };
            const verseProgress = progress.verses[verseNumber] || { memorized: false };
            
            // Toggle the memorized status
            verseProgress.memorized = !verseProgress.memorized;
            progress.verses[verseNumber] = verseProgress;
            
            // Calculate overall progress for this surah
            const totalVerses = currentSurah.arabic.length;
            const memorizedVerses = Object.values(progress.verses).filter(v => v.memorized).length;
            progress.progress = (memorizedVerses / totalVerses) * 100;
            
            // Check if the entire surah is memorized
            progress.memorized = memorizedVerses === totalVerses;
            
            // Update user progress
            userProgress[currentSurah.id] = progress;
            saveToLocalStorage('grade1Progress', userProgress);
            
            // Award points for memorizing a verse
            if (verseProgress.memorized) {
                currentUser.points += 10;
                
                // Award bonus for completing a surah
                if (progress.memorized) {
                    currentUser.points += 50;
                    
                    // Check for achievements
                    const totalMemorizedSurahs = Object.values(userProgress).filter(p => p.memorized).length;
                    if (totalMemorizedSurahs === 1) {
                        if (!currentUser.achievements.includes('first_surah')) {
                            currentUser.achievements.push('first_surah');
                            showAchievement('Pencapaian Pertama!', 'Selamat! Anda telah menghafal surat pertama Anda.');
                        }
                    }
                    
                    if (totalMemorizedSurahs === 5) {
                        if (!currentUser.achievements.includes('all_surahs')) {
                            currentUser.achievements.push('all_surahs');
                            showAchievement('Ahli Hafalan!', 'Luar biasa! Anda telah menghafal semua 5 surat pendek.');
                        }
                    }
                }
                
                saveToLocalStorage('grade1User', currentUser);
            }
            
            // Update the UI
            updateStatistics();
            
            // Update the verse item
            const verseItem = document.getElementById(`verse-${verseNumber}`);
            if (verseItem) {
                if (verseProgress.memorized) {
                    verseItem.classList.add('bg-green-50');
                } else {
                    verseItem.classList.remove('bg-green-50');
                }
                
                const statusText = verseItem.querySelector('.text-sm');
                if (statusText) {
                    statusText.innerHTML = verseProgress.memorized ? '<i class="fas fa-check text-green-500"></i> Terhafal' : 'Belum dihafal';
                }
                
                const toggleButton = verseItem.querySelector('button');
                if (toggleButton) {
                    toggleButton.innerHTML = verseProgress.memorized ? '<i class="fas fa-check-circle"></i> Tandai Belum Dihafal' : '<i class="far fa-circle"></i> Tandai Sudah Dihafal';
                }
            }
        }

        // Show achievement notification
        function showAchievement(title, message) {
            Swal.fire({
                title: title,
                text: message,
                icon: 'success',
                confirmButtonColor: '#059669',
                confirmButtonText: 'Mantap!',
                imageUrl: 'https://cdn-icons-png.flaticon.com/128/1047/1047711.png',
                imageWidth: 100,
                imageHeight: 100,
                imageAlt: 'Achievement Badge'
            });
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
