<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>🕌 Iqra' Digital Jilid 1 - Belajar Membaca Al-Qur'an 🕌</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/128/3165/3165231.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
           @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Nunito:wght@400;600;700;800&display=swap');
        
        body { 
            font-family: 'Nunito', sans-serif; 
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .arabic-text {
            font-family: 'Amiri', serif;
            direction: rtl;
            text-align: center;
        }
        
        .title-font { font-family: 'Amiri', serif; }
        
        /* Menu card animations */
        .menu-card {
            transition: all 0.3s ease;
        }
        
        .menu-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        /* Letter animations */
        .letter-glow {
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            transition: all 0.3s ease;
        }
        
        .letter-bounce {
            animation: letterBounce 0.6s ease;
        }
        
        @keyframes letterBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* Game animations */
        .game-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .game-card:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        
        /* Button styles */
        .btn-islamic {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transition: all 0.2s ease;
        }
        
        .btn-islamic:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(5, 150, 105, 0.4);
        }
        
        .btn-gold {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
        }
        
        .btn-blue {
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
        }
        
        .btn-purple {
            background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
        }
        
        /* Modal animations */
        .modal-enter {
            animation: modalEnter 0.4s ease-out;
        }
        
        @keyframes modalEnter {
            0% { opacity: 0; transform: scale(0.8) translateY(-50px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        /* Success animations */
        .success-pulse {
            animation: successPulse 0.6s ease;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Game specific styles */
        .memory-card {
            perspective: 1000px;
        }
        
        .memory-card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .memory-card.flipped .memory-card-inner {
            transform: rotateY(180deg);
        }
        
        .memory-card-front, .memory-card-back {
            backface-visibility: hidden;
        }
        
        .memory-card-back {
            transform: rotateY(180deg);
        }
        
        /* Writing Canvas Styles */
        .writing-canvas {
            border: 3px solid #10B981;
            border-radius: 12px;
            background: white;
            cursor: crosshair;
            touch-action: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .writing-guide {
            position: absolute;
            pointer-events: none;
            opacity: 0.2;
            font-family: 'Amiri', serif;
            color: #10B981;
            font-size: 120px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            user-select: none;
        }
        
        .brush-size-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #10B981;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .brush-size-btn.active {
            background: #10B981;
            color: white;
            transform: scale(1.1);
        }
        
        .brush-size-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        
        .color-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .color-btn.active {
            border-color: #374151;
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .color-btn:hover {
            transform: scale(1.1);
        }
        
        .writing-letter-btn {
            transition: all 0.2s ease;
        }
        
        .writing-letter-btn:hover {
            transform: scale(1.05);
        }
        
        .writing-letter-btn.active {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.4);
        }
        
        /* Canvas container */
        .canvas-container {
            position: relative;
            display: inline-block;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .arabic-text { font-size: 2rem; }
            .menu-card { margin-bottom: 1rem; }
            .writing-guide { font-size: 80px; }
            .canvas-container { width: 280px !important; height: 180px !important; }
            .writing-canvas { width: 280px !important; height: 180px !important; }
        }
        
        @media (min-width: 769px) {
            .arabic-text { font-size: 3rem; }
        }
        
        /* Progress bar */
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        /* Floating elements */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* Writing feedback animations */
        .writing-feedback {
            animation: feedbackPulse 0.5s ease;
        }
        
        @keyframes feedbackPulse {
            0% { transform: scale(1); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Quiz styles */
        .quiz-option {
            transition: all 0.3s ease;
        }
        
        .quiz-option:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .quiz-option.correct {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            animation: correctPulse 0.6s ease;
        }
        
        .quiz-option.wrong {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            animation: wrongShake 0.6s ease;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Memory game styles */
        .memory-card {
            height: 120px;
            perspective: 1000px;
        }
        
        .memory-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .memory-card.flipped .memory-card-inner {
            transform: rotateY(180deg);
        }
        
        .memory-card-front, .memory-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }
        
        .memory-card-front {
            background: linear-gradient(135deg, #6366F1, #4F46E5);
            color: white;
        }
        
        .memory-card-back {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            transform: rotateY(180deg);
        }

        /* Speed game styles */
        .speed-letter {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .speed-letter:hover {
            transform: scale(1.1);
        }
        
        .speed-letter.clicked {
            animation: speedClick 0.3s ease;
        }
        
        @keyframes speedClick {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Pattern game styles */
        .pattern-display {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
        }
        
        .pattern-input {
            background: white;
            border: 3px solid #10B981;
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
        }

        /* Exam styles */
        .exam-question {
            background: linear-gradient(135deg, #F3F4F6, #E5E7EB);
            border-radius: 16px;
            padding: 24px;
            margin: 16px 0;
            border: 2px solid #D1D5DB;
        }
        
        .exam-timer {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            animation: timerPulse 1s infinite;
        }
        
        @keyframes timerPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Footer Styles */
        .footer {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            padding: 2rem 1rem;
            margin-top: 2rem;
            border-top: 4px solid #F59E0B;
        }
        
        .footer-links a {
            transition: all 0.3s ease;
        }
        
        .footer-links a:hover {
            color: #F59E0B;
            transform: translateY(-2px);
        }
        
        /* Certificate Styles */
        .certificate-container {
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23f0f0f0"/><path d="M0,0 L100,100 M100,0 L0,100" stroke="%23e0e0e0" stroke-width="1"/></svg>');
            background-size: 20px 20px;
            border: 20px solid transparent;
            border-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50"><rect width="50" height="50" fill="%23059669" opacity="0.2"/></svg>') 30 round;
            padding: 3rem;
            position: relative;
            max-width: 800px;
            margin: 2rem auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .certificate-border {
            border: 3px solid #10B981;
            padding: 2rem;
            position: relative;
            text-align: center;
        }
        
        .certificate-title {
            font-family: 'Amiri', serif;
            font-size: 2.5rem;
            color: #059669;
            margin-bottom: 1.5rem;
            text-decoration: underline;
        }
        
        .certificate-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .certificate-stamp {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 120px;
            height: 120px;
            border: 3px solid #10B981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.9);
            transform: rotate(15deg);
        }
        
        .certificate-signature {
            margin-top: 2rem;
            border-top: 2px solid #10B981;
            padding-top: 1rem;
            display: inline-block;
        }
        
        /* Game Card Animations */
        .game-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .game-card:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        
        /* Memory Game Styles */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .memory-card {
            height: 100px;
            perspective: 1000px;
        }
        
        .memory-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .memory-card.flipped .memory-card-inner {
            transform: rotateY(180deg);
        }
        
        .memory-card-front, .memory-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }
        
        .memory-card-front {
            background: linear-gradient(135deg, #6366F1, #4F46E5);
            color: white;
            font-size: 1.5rem;
        }
        
        .memory-card-back {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            transform: rotateY(180deg);
            font-size: 2rem;
            font-family: 'Amiri', serif;
        }
        
        /* Quiz Game Styles */
        .quiz-option {
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 15px;
            border-radius: 12px;
            background: #F3F4F6;
            margin: 10px 0;
            border: 2px solid #E5E7EB;
        }
        
        .quiz-option:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .quiz-option.correct {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            animation: correctPulse 0.6s ease;
        }
        
        .quiz-option.wrong {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            animation: wrongShake 0.6s ease;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        /* Speed Game Styles */
        .speed-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .speed-letter {
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            color: white;
            border-radius: 12px;
            padding: 20px;
            font-size: 2rem;
            font-family: 'Amiri', serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .speed-letter:hover {
            transform: scale(1.1);
        }
        
        .speed-letter.clicked {
            background: linear-gradient(135deg, #10B981, #059669);
            animation: speedClick 0.3s ease;
        }
        
        @keyframes speedClick {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        /* Pattern Game Styles */
        .pattern-display {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            font-size: 2rem;
            font-family: 'Amiri', serif;
            box-shadow: 0 8px 24px rgba(245, 158, 11, 0.3);
        }
        
        .pattern-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .pattern-input .letter-btn {
            background: #F3F4F6;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            padding: 15px;
            font-size: 1.5rem;
            font-family: 'Amiri', serif;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 60px;
        }
        
        .pattern-input .letter-btn:hover {
            transform: scale(1.1);
            background: #E5E7EB;
        }
        
        /* Writing Practice Styles */
        .writing-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .color-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .color-btn.active {
            border-color: #374151;
            transform: scale(1.2);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .color-btn:hover {
            transform: scale(1.1);
        }
        
        .brush-size-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #10B981;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .brush-size-btn.active {
            background: #10B981;
            color: white;
            transform: scale(1.1);
        }
        
        .brush-size-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        
        .writing-letter-btn {
            background: #F3F4F6;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            padding: 10px 15px;
            font-size: 1.2rem;
            font-family: 'Amiri', serif;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .writing-letter-btn:hover {
            transform: scale(1.05);
        }
        
        .writing-letter-btn.active {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.4);
            background: #10B981;
            color: white;
        }
        
        .canvas-container {
            position: relative;
            display: inline-block;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            margin: 20px 0;
        }
        
        .writing-canvas {
            border: 3px solid #10B981;
            border-radius: 12px;
            background: white;
            cursor: crosshair;
            touch-action: none;
        }
        
        .writing-guide {
            position: absolute;
            pointer-events: none;
            opacity: 0.2;
            font-family: 'Amiri', serif;
            color: #10B981;
            font-size: 120px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            user-select: none;
        }
        
        /* Exam Styles */
        .exam-question {
            background: linear-gradient(135deg, #F3F4F6, #E5E7EB);
            border-radius: 16px;
            padding: 24px;
            margin: 16px 0;
            border: 2px solid #D1D5DB;
        }
        
        .exam-timer {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            animation: timerPulse 1s infinite;
        }
        
        @keyframes timerPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .speed-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .certificate-container {
                padding: 1rem;
            }
            
            .certificate-title {
                font-size: 1.8rem;
            }
            
            .certificate-stamp {
                width: 80px;
                height: 80px;
                bottom: 15px;
                right: 15px;
            }
            
            .pattern-input {
                flex-wrap: wrap;
            }
            
            .writing-controls {
                gap: 10px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-600 via-emerald-600 to-teal-700 min-h-screen">

    <!-- [Kode HTML yang sudah ada tetap dipertahankan] -->
    
    <!-- Footer Section -->
    <footer class="footer">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <img src="https://cdn-icons-png.flaticon.com/128/3165/3165231.png" alt="Iqra Logo" class="w-8 h-8 mr-2">
                        Iqra' Digital
                    </h3>
                    <p class="text-green-100 mb-4">
                        Aplikasi pembelajaran membaca Al-Qur'an untuk anak dengan metode Iqra' yang interaktif dan menyenangkan.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white hover:text-yellow-300 text-2xl"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="text-white hover:text-yellow-300 text-2xl"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white hover:text-yellow-300 text-2xl"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="text-white hover:text-yellow-300 text-2xl"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Tautan Cepat</h3>
                    <ul class="footer-links space-y-2">
                        <li><a href="#" class="text-green-100"><i class="fas fa-arrow-right mr-2"></i> Beranda</a></li>
                        <li><a href="#" class="text-green-100"><i class="fas fa-arrow-right mr-2"></i> Metode Belajar</a></li>
                        <li><a href="#" class="text-green-100"><i class="fas fa-arrow-right mr-2"></i> Prestasi</a></li>
                        <li><a href="#" class="text-green-100"><i class="fas fa-arrow-right mr-2"></i> Tentang Kami</a></li>
                        <li><a href="#" class="text-green-100"><i class="fas fa-arrow-right mr-2"></i> Kontak</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Kontak</h3>
                    <ul class="space-y-2 text-green-100">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt mr-3 mt-1"></i>
                            <span>Jl. Pendidikan No. 123, Bandung, Jawa Barat</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-phone-alt mr-3 mt-1"></i>
                            <span>+62 812 3456 7890</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-envelope mr-3 mt-1"></i>
                            <span>info@iqradigital.com</span>
                        </li>
                    </ul>
                    
                    <div class="mt-6">
                        <button onclick="showCertificate()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-full font-bold transition-all flex items-center">
                            <i class="fas fa-award mr-2"></i> Lihat Sertifikat
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-green-800 mt-8 pt-6 text-center text-green-200">
                <p>&copy; 2023 Iqra' Digital. All rights reserved. | Developed with <i class="fas fa-heart text-red-400"></i> for Islamic Education</p>
            </div>
        </div>
    </footer>

    <!-- Certificate Modal -->
    <div id="certificateModal" class="fixed inset-0 bg-black/80 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="sticky top-0 bg-white p-4 border-b flex justify-between items-center">
                <h3 class="text-xl font-bold text-green-700">Sertifikat Kelulusan</h3>
                <button onclick="closeCertificate()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <div class="p-4">
                <div class="certificate-container">
                    <div class="certificate-border">
                        <div class="certificate-title">شَهَادَةُ التَّخَرُّج</div>
                        <div class="certificate-title">SERTIFIKAT KELULUSAN</div>
                        
                        <div class="certificate-text">
                            Dengan ini menyatakan bahwa
                        </div>
                        
                        <div class="text-2xl font-bold mb-6" id="certificateName">Nama Siswa</div>
                        
                        <div class="certificate-text">
                            telah menyelesaikan dengan baik pembelajaran
                        </div>
                        
                        <div class="text-xl font-bold text-green-700 mb-6">IQRA' DIGITAL JILID 1</div>
                        
                        <div class="certificate-text">
                            pada tanggal <span id="certificateDate">01 Januari 2023</span>
                        </div>
                        
                        <div class="certificate-text">
                            dengan perolehan total pahala: <span id="certificateScore" class="font-bold">0</span>
                        </div>
                        
                        <div class="certificate-stamp">
                            <div class="text-center">
                                <div class="font-bold">Tanda Tangan</div>
                                <div class="text-sm">Guru Pembimbing</div>
                            </div>
                        </div>
                        
                        <div class="certificate-signature">
                            <div class="font-bold">Ust. Ahmad S.Pd.I</div>
                            <div>Pembimbing Iqra' Digital</div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="printCertificate()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-full font-bold transition-all mr-3">
                        <i class="fas fa-print mr-2"></i> Cetak Sertifikat
                    </button>
                    <button onclick="shareCertificate()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full font-bold transition-all">
                        <i class="fas fa-share-alt mr-2"></i> Bagikan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // [Kode JavaScript yang sudah ada tetap dipertahankan]
        
        // ==================== MEMORY GAME ====================
        function startMemoryGame() {
            gameScore = 0;
            gameLevel = 1;
            updateDisplay();
            
            const letters = ['أَ', 'بَ', 'تَ', 'ثَ', 'جَ', 'حَ'];
            let memoryCards = [];
            
            // Create pairs of cards
            letters.forEach(letter => {
                memoryCards.push({ type: 'letter', value: letter });
                memoryCards.push({ type: 'name', value: convertArabicToName(letter) });
            });
            
            // Shuffle cards
            memoryCards = memoryCards.sort(() => Math.random() - 0.5);
            
            let content = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-purple-600 mb-2"><i class="fas fa-brain"></i> Memory Game</h3>
                    <p class="text-gray-600">Cocokkan huruf Hijaiyah dengan nama latinnya!</p>
                    <div class="flex justify-center gap-4 mt-3">
                        <div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-bold">
                            Level: ${gameLevel}
                        </div>
                        <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-bold">
                            Pasangan: <span id="matchedPairs">0</span>/6
                        </div>
                        <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">
                            Waktu: <span id="memoryTimer">60</span>s
                        </div>
                    </div>
                </div>
                
                <div class="memory-grid">
            `;
            
            memoryCards.forEach((card, index) => {
                content += `
                    <div class="memory-card" onclick="flipCard(this, '${card.type}', '${card.value}')">
                        <div class="memory-card-inner">
                            <div class="memory-card-front">
                                <i class="fas fa-question"></i>
                            </div>
                            <div class="memory-card-back">
                                ${card.type === 'letter' ? card.value : card.value}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            content += `
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="loadLatihanMenu()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-full font-bold transition-all mr-2">
                        <i class="fas fa-arrow-left"></i> Kembali
                    </button>
                    <button onclick="startMemoryGame()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-redo"></i> Ulangi
                    </button>
                </div>
            `;
            
            document.getElementById('latihan-content').innerHTML = content;
            document.getElementById('latihan-controls').innerHTML = '';
            
            // Start timer
            let timeLeft = 60;
            const timerElement = document.getElementById('memoryTimer');
            const timer = setInterval(() => {
                timeLeft--;
                if (timerElement) timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    Swal.fire({
                        icon: 'info',
                        title: 'Waktu Habis!',
                        text: 'Waktu permainan telah habis. Ingin mencoba lagi?',
                        showCancelButton: true,
                        confirmButtonText: 'Ya, ulangi!',
                        cancelButtonText: 'Kembali ke menu',
                        confirmButtonColor: '#059669'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            startMemoryGame();
                        } else {
                            loadLatihanMenu();
                        }
                    });
                }
            }, 1000);
            
            // Store timer reference to clear it later
            window.memoryGameTimer = timer;
        }
        
        let flippedCards = [];
        let matchedPairs = 0;
        
        function flipCard(cardElement, type, value) {
            if (flippedCards.length >= 2 || cardElement.classList.contains('flipped') || cardElement.classList.contains('matched')) {
                return;
            }
            
            cardElement.classList.add('flipped');
            flippedCards.push({ element: cardElement, type, value });
            
            if (flippedCards.length === 2) {
                const card1 = flippedCards[0];
                const card2 = flippedCards[1];
                
                // Check if it's a match (one letter and its corresponding name)
                const letterValue = card1.type === 'letter' ? card1.value : card2.value;
                const nameValue = card1.type === 'name' ? card1.value : card2.value;
                
                if (convertArabicToName(letterValue) === nameValue) {
                    // Match found
                    setTimeout(() => {
                        card1.element.classList.add('matched');
                        card2.element.classList.add('matched');
                        card1.element.classList.remove('flipped');
                        card2.element.classList.remove('flipped');
                        
                        flippedCards = [];
                        matchedPairs++;
                        document.getElementById('matchedPairs').textContent = matchedPairs;
                        
                        gameScore += 50;
                        updateDisplay();
                        
                        // Check if all pairs are matched
                        if (matchedPairs >= 6) {
                            clearInterval(window.memoryGameTimer);
                            Swal.fire({
                                icon: 'success',
                                title: 'Selamat!',
                                text: `Kamu berhasil menyelesaikan Memory Game! Skor: ${gameScore}`,
                                confirmButtonColor: '#059669'
                            }).then(() => {
                                gameLevel++;
                                totalScore += gameScore;
                                localStorage.setItem('iqra_totalScore', totalScore.toString());
                                updateDisplay();
                                loadLatihanMenu();
                            });
                        }
                    }, 500);
                } else {
                    // Not a match
                    setTimeout(() => {
                        card1.element.classList.remove('flipped');
                        card2.element.classList.remove('flipped');
                        flippedCards = [];
                    }, 1000);
                }
            }
        }
        
        // ==================== QUIZ GAME ====================
        function startQuizGame() {
            gameScore = 0;
            quizCurrentQuestion = 0;
            updateDisplay();
            
            // Define quiz questions
            quizQuestions = [
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'أَ',
                    options: ['ALIF', 'BA', 'TA', 'TSA'],
                    correctAnswer: 'ALIF'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'بَ',
                    options: ['ALIF', 'BA', 'JA', 'HA'],
                    correctAnswer: 'BA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'تَ',
                    options: ['TSA', 'BA', 'TA', 'ALIF'],
                    correctAnswer: 'TA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'ثَ',
                    options: ['TSA', 'BA', 'TA', 'ALIF'],
                    correctAnswer: 'TSA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'جَ',
                    options: ['HA', 'BA', 'JA', 'TSA'],
                    correctAnswer: 'JA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'حَ',
                    options: ['HA', 'BA', 'JA', 'KHA'],
                    correctAnswer: 'HA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'خَ',
                    options: ['HA', 'KHA', 'JA', 'TSA'],
                    correctAnswer: 'KHA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'دَ',
                    options: ['DZA', 'DA', 'RA', 'ZA'],
                    correctAnswer: 'DA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'ذَ',
                    options: ['DZA', 'DA', 'RA', 'ZA'],
                    correctAnswer: 'DZA'
                },
                {
                    question: 'Apa nama huruf ini?',
                    letter: 'رَ',
                    options: ['DZA', 'DA', 'RA', 'ZA'],
                    correctAnswer: 'RA'
                }
            ];
            
            loadQuizQuestion();
        }
        
        function loadQuizQuestion() {
            if (quizCurrentQuestion >= quizQuestions.length) {
                // Quiz completed
                Swal.fire({
                    icon: 'success',
                    title: 'Quiz Selesai!',
                    html: `Kamu telah menyelesaikan quiz!<br>Skor akhir: <b>${gameScore}/${quizQuestions.length * 10}</b>`,
                    confirmButtonColor: '#059669'
                }).then(() => {
                    totalScore += gameScore;
                    localStorage.setItem('iqra_totalScore', totalScore.toString());
                    updateDisplay();
                    loadLatihanMenu();
                });
                return;
            }
            
            const question = quizQuestions[quizCurrentQuestion];
            
            let content = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-purple-600 mb-2"><i class="fas fa-question-circle"></i> Quiz Huruf Hijaiyah</h3>
                    <p class="text-gray-600">Pilih nama yang tepat untuk huruf berikut!</p>
                    <div class="flex justify-center gap-4 mt-3">
                        <div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-bold">
                            Soal: ${quizCurrentQuestion + 1}/${quizQuestions.length}
                        </div>
                        <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-bold">
                            Skor: ${gameScore}
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg mb-6">
                    <div class="text-5xl mb-4 arabic-text">${question.letter}</div>
                    <h4 class="text-xl font-bold text-gray-800">${question.question}</h4>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            `;
            
            question.options.forEach(option => {
                content += `
                    <div class="quiz-option" onclick="checkQuizAnswer('${option}')">
                        <div class="text-center py-4 font-bold">${option}</div>
                    </div>
                `;
            });
            
            content += `
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="loadLatihanMenu()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-arrow-left"></i> Kembali ke Menu
                    </button>
                </div>
            `;
            
            document.getElementById('latihan-content').innerHTML = content;
            document.getElementById('latihan-controls').innerHTML = '';
        }
        
        function checkQuizAnswer(selectedAnswer) {
            const question = quizQuestions[quizCurrentQuestion];
            const optionElements = document.querySelectorAll('.quiz-option');
            
            // Disable all options
            optionElements.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            // Find the selected option and mark it
            optionElements.forEach(option => {
                if (option.textContent.includes(selectedAnswer)) {
                    if (selectedAnswer === question.correctAnswer) {
                        option.classList.add('correct');
                        gameScore += 10;
                        updateDisplay();
                    } else {
                        option.classList.add('wrong');
                        
                        // Also highlight the correct answer
                        optionElements.forEach(opt => {
                            if (opt.textContent.includes(question.correctAnswer)) {
                                opt.classList.add('correct');
                            }
                        });
                    }
                }
            });
            
            // Move to next question after a delay
            setTimeout(() => {
                quizCurrentQuestion++;
                loadQuizQuestion();
            }, 1500);
        }
        
        // ==================== SPEED GAME ====================
        function startSpeedGame() {
            gameScore = 0;
            speedGameScore = 0;
            updateDisplay();
            
            const letters = ['أَ', 'بَ', 'تَ', 'ثَ', 'جَ', 'حَ', 'خَ', 'دَ', 'ذَ', 'رَ'];
            const targetLetter = letters[Math.floor(Math.random() * letters.length)];
            
            let content = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-purple-600 mb-2"><i class="fas fa-bolt"></i> Speed Reading</h3>
                    <p class="text-gray-600">Klik huruf <span class="font-bold">${convertArabicToName(targetLetter)}</span> secepat mungkin!</p>
                    <div class="flex justify-center gap-4 mt-3">
                        <div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-bold">
                            Waktu: <span id="speedTimer">60</span>s
                        </div>
                        <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-bold">
                            Skor: <span id="speedScore">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="speed-grid">
            `;
            
            // Create a shuffled array of letters
            const shuffledLetters = [...letters].sort(() => Math.random() - 0.5);
            
            shuffledLetters.forEach(letter => {
                content += `
                    <div class="speed-letter" onclick="checkSpeedLetter('${letter}', '${targetLetter}')">
                        ${letter}
                    </div>
                `;
            });
            
            content += `
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="loadLatihanMenu()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-full font-bold transition-all mr-2">
                        <i class="fas fa-arrow-left"></i> Kembali
                    </button>
                    <button onclick="startSpeedGame()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-redo"></i> Ulangi
                    </button>
                </div>
            `;
            
            document.getElementById('latihan-content').innerHTML = content;
            document.getElementById('latihan-controls').innerHTML = '';
            
            // Start timer
            let timeLeft = 60;
            const timerElement = document.getElementById('speedTimer');
            const timer = setInterval(() => {
                timeLeft--;
                if (timerElement) timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    Swal.fire({
                        icon: 'info',
                        title: 'Waktu Habis!',
                        html: `Permainan selesai! Skor akhir: <b>${speedGameScore}</b><br>Huruf yang diklik dengan benar: <b>${speedGameScore}</b>`,
                        confirmButtonColor: '#059669'
                    }).then(() => {
                        gameScore = speedGameScore;
                        totalScore += gameScore;
                        localStorage.setItem('iqra_totalScore', totalScore.toString());
                        updateDisplay();
                        loadLatihanMenu();
                    });
                }
            }, 1000);
            
            // Store timer reference to clear it later
            window.speedGameTimer = timer;
        }
        
        function checkSpeedLetter(letter, targetLetter) {
            const letterElement = event.currentTarget;
            
            if (letter === targetLetter) {
                // Correct letter
                letterElement.classList.add('clicked');
                speedGameScore++;
                document.getElementById('speedScore').textContent = speedGameScore;
                
                // Change the letter after a short delay
                setTimeout(() => {
                    letterElement.classList.remove('clicked');
                }, 300);
            } else {
                // Wrong letter
                letterElement.style.background = 'linear-gradient(135deg, #EF4444, #DC2626)';
                
                // Revert after a short delay
                setTimeout(() => {
                    letterElement.style.background = 'linear-gradient(135deg, #3B82F6, #1D4ED8)';
                }, 300);
            }
        }
        
        // ==================== PATTERN GAME ====================
        function startPatternGame() {
            gameScore = 0;
            patternLevel = 1;
            updateDisplay();
            
            // Generate a pattern sequence
            const letters = ['أَ', 'بَ', 'تَ', 'ثَ', 'جَ', 'حَ'];
            const patternLength = 3 + patternLevel; // Increase pattern length with level
            let patternSequence = [];
            
            for (let i = 0; i < patternLength; i++) {
                patternSequence.push(letters[Math.floor(Math.random() * letters.length)]);
            }
            
            let content = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-purple-600 mb-2"><i class="fas fa-project-diagram"></i> Pattern Game</h3>
                    <p class="text-gray-600">Hafalkan dan ulangi pola huruf berikut!</p>
                    <div class="flex justify-center gap-4 mt-3">
                        <div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-bold">
                            Level: ${patternLevel}
                        </div>
                        <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-bold">
                            Skor: ${gameScore}
                        </div>
                    </div>
                </div>
                
                <div class="pattern-display text-center" id="patternDisplay">
                    ${patternSequence.join(' ')}
                </div>
                
                <div class="text-center mt-4">
                    <button onclick="showPattern()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-full font-bold transition-all mr-2">
                        <i class="fas fa-eye"></i> Lihat Pola
                    </button>
                    <button onclick="startPatternInput()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-play"></i> Mulai
                    </button>
                </div>
                
                <div class="pattern-input hidden" id="patternInput">
                    <div class="text-center mb-4">
                        <p class="text-gray-700 font-bold">Ulangi pola yang telah ditampilkan:</p>
                    </div>
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="loadLatihanMenu()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-arrow-left"></i> Kembali ke Menu
                    </button>
                </div>
            `;
            
            document.getElementById('latihan-content').innerHTML = content;
            document.getElementById('latihan-controls').innerHTML = '';
            
            // Store the pattern sequence for later checking
            window.patternSequence = patternSequence;
        }
        
        function showPattern() {
            const patternDisplay = document.getElementById('patternDisplay');
            patternDisplay.classList.add('text-4xl');
            
            // Hide the pattern after 3 seconds
            setTimeout(() => {
                patternDisplay.textContent = '? ? ?';
                patternDisplay.classList.remove('text-4xl');
            }, 3000);
        }
        
        function startPatternInput() {
            const patternInput = document.getElementById('patternInput');
            patternInput.classList.remove('hidden');
            
            let inputContent = '';
            
            window.patternSequence.forEach((letter, index) => {
                inputContent += `
                    <button class="letter-btn" onclick="addPatternInput('${letter}')">
                        ${letter}
                    </button>
                `;
            });
            
            inputContent += `
                <div class="w-full text-center mt-4">
                    <div id="patternUserInput" class="text-2xl font-bold text-gray-800 mb-4"></div>
                    <button onclick="checkPattern()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-full font-bold transition-all mr-2">
                        <i class="fas fa-check"></i> Periksa
                    </button>
                    <button onclick="resetPatternInput()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-undo"></i> Ulangi
                    </button>
                </div>
            `;
            
            patternInput.innerHTML = inputContent;
        }
        
        function addPatternInput(letter) {
            const userInput = document.getElementById('patternUserInput');
            userInput.textContent += userInput.textContent ? ' ' + letter : letter;
        }
        
        function resetPatternInput() {
            document.getElementById('patternUserInput').textContent = '';
        }
        
        function checkPattern() {
            const userInput = document.getElementById('patternUserInput').textContent;
            const correctPattern = window.patternSequence.join(' ');
            
            if (userInput === correctPattern) {
                // Correct pattern
                Swal.fire({
                    icon: 'success',
                    title: 'Benar!',
                    text: 'Kamu berhasil mengulangi pola dengan benar!',
                    confirmButtonColor: '#059669'
                }).then(() => {
                    gameScore += 20 * patternLevel;
                    patternLevel++;
                    updateDisplay();
                    
                    if (patternLevel <= 5) {
                        startPatternGame();
                    } else {
                        Swal.fire({
                            icon: 'success',
                            title: 'Level Selesai!',
                            html: `Selamat! Kamu telah menyelesaikan semua level Pattern Game!<br>Skor akhir: <b>${gameScore}</b>`,
                            confirmButtonColor: '#059669'
                        }).then(() => {
                            totalScore += gameScore;
                            localStorage.setItem('iqra_totalScore', totalScore.toString());
                            updateDisplay();
                            loadLatihanMenu();
                        });
                    }
                });
            } else {
                // Wrong pattern
                Swal.fire({
                    icon: 'error',
                    title: 'Belum tepat',
                    text: 'Pola yang kamu input belum sesuai. Coba lagi!',
                    confirmButtonColor: '#059669'
                });
            }
        }
        
        // ==================== WRITING PRACTICE ====================
        function startWritingPractice() {
            let content = `
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-purple-600 mb-2"><i class="fas fa-pen"></i> Latihan Menulis</h3>
                    <p class="text-gray-600">Latihan menulis huruf Hijaiyah dengan benar</p>
                </div>
                
                <div class="writing-controls">
                    <div class="flex items-center space-x-2">
                        <span class="font-bold">Warna:</span>
                        <div class="color-btn active" style="background-color: #000000;" onclick="changeColor('#000000', this)"></div>
                        <div class="color-btn" style="background-color: #3B82F6;" onclick="changeColor('#3B82F6', this)"></div>
                        <div class="color-btn" style="background-color: #EF4444;" onclick="changeColor('#EF4444', this)"></div>
                        <div class="color-btn" style="background-color: #10B981;" onclick="changeColor('#10B981', this)"></div>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <span class="font-bold">Ukuran:</span>
                        <div class="brush-size-btn active" onclick="changeSize(2, this)">S</div>
                        <div class="brush-size-btn" onclick="changeSize(5, this)">M</div>
                        <div class="brush-size-btn" onclick="changeSize(10, this)">L</div>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <span class="font-bold">Huruf:</span>
                        <button class="writing-letter-btn active" onclick="changeGuide('أَ', this)">أَ</button>
                        <button class="writing-letter-btn" onclick="changeGuide('بَ', this)">بَ</button>
                        <button class="writing-letter-btn" onclick="changeGuide('تَ', this)">تَ</button>
                        <button class="writing-letter-btn" onclick="changeGuide('ثَ', this)">ثَ</button>
                    </div>
                    
                    <button onclick="clearCanvas()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-trash"></i> Hapus
                    </button>
                </div>
                
                <div class="text-center">
                    <div class="canvas-container">
                        <canvas id="writingCanvas" width="400" height="400" class="writing-canvas"></canvas>
                        <div class="writing-guide" id="writingGuide">أَ</div>
                    </div>
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="loadLatihanMenu()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-full font-bold transition-all">
                        <i class="fas fa-arrow-left"></i> Kembali ke Menu
                    </button>
                </div>
            `;
            
            document.getElementById('latihan-content').innerHTML = content;
            document.getElementById('latihan-controls').innerHTML = '';
            
            // Initialize canvas
            setTimeout(initCanvas, 100);
        }
        
        function initCanvas() {
            const canvas = document.getElementById('writingCanvas');
            const guide = document.getElementById('writingGuide');
            const ctx = canvas.getContext('2d');
            
            // Set initial styles
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.lineWidth = 2;
            ctx.strokeStyle = '#000000';
            
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            // Mouse event listeners
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch event listeners for mobile devices
            canvas.addEventListener('touchstart', handleTouchStart);
            canvas.addEventListener('touchmove', handleTouchMove);
            canvas.addEventListener('touchend', handleTouchEnd);
            
            function startDrawing(e) {
                isDrawing = true;
                [lastX, lastY] = [e.offsetX, e.offsetY];
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke();
                
                [lastX, lastY] = [e.offsetX, e.offsetY];
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            function handleTouchStart(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                
                isDrawing = true;
                [lastX, lastY] = [
                    touch.clientX - rect.left,
                    touch.clientY - rect.top
                ];
            }
            
            function handleTouchMove(e) {
                e.preventDefault();
                if (!isDrawing) return;
                
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                
                const currentX = touch.clientX - rect.left;
                const currentY = touch.clientY - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(currentX, currentY);
                ctx.stroke();
                
                [lastX, lastY] = [currentX, currentY];
            }
            
            function handleTouchEnd(e) {
                e.preventDefault();
                isDrawing = false;
            }
            
            // Store canvas context for other functions
            window.canvasCtx = ctx;
        }
        
        function changeColor(color, element) {
            // Update active color button
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
            
            // Change drawing color
            if (window.canvasCtx) {
                window.canvasCtx.strokeStyle = color;
            }
        }
        
        function changeSize(size, element) {
            // Update active size button
            document.querySelectorAll('.brush-size-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
            
            // Change brush size
            if (window.canvasCtx) {
                window.canvasCtx.lineWidth = size;
            }
        }
        
        function changeGuide(letter, element) {
            // Update active letter button
            document.querySelectorAll('.writing-letter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
            
            // Change guide letter
            document.getElementById('writingGuide').textContent = letter;
        }
        
        function clearCanvas() {
            if (window.canvasCtx) {
                const canvas = document.getElementById('writingCanvas');
                window.canvasCtx.clearRect(0, 0, canvas.width, canvas.height);
            }
        }
        
        // ==================== CERTIFICATE FUNCTIONS ====================
        function showCertificate() {
            // Get user name from localStorage or use default
            const userName = localStorage.getItem('iqra_userName') || 'Siswa';
            const userScore = localStorage.getItem('iqra_totalScore') || '0';
            
            // Set current date
            const now = new Date();
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            const formattedDate = now.toLocaleDateString('id-ID', options);
            
            // Update certificate content
            document.getElementById('certificateName').textContent = userName;
            document.getElementById('certificateDate').textContent = formattedDate;
            document.getElementById('certificateScore').textContent = userScore;
            
            // Show certificate modal
            document.getElementById('certificateModal').classList.remove('hidden');
            document.getElementById('certificateModal').classList.add('flex');
        }
        
        function closeCertificate() {
            document.getElementById('certificateModal').classList.add('hidden');
            document.getElementById('certificateModal').classList.remove('flex');
        }
        
        function printCertificate() {
            const printContent = document.querySelector('.certificate-container').innerHTML;
            const originalContent = document.body.innerHTML;
            
            document.body.innerHTML = printContent;
            window.print();
            document.body.innerHTML = originalContent;
            
            // Reload the page to restore functionality
            window.location.reload();
        }
        
        function shareCertificate() {
            if (navigator.share) {
                navigator.share({
                    title: 'Sertifikat Kelulusan Iqra Digital',
                    text: `Saya telah menyelesaikan pembelajaran Iqra Digital dengan skor ${localStorage.getItem('iqra_totalScore') || '0'}!`,
                    url: window.location.href
                })
                .then(() => console.log('Berhasil berbagi'))
                .catch((error) => console.log('Error sharing:', error));
            } else {
                Swal.fire({
                    icon: 'info',
                    title: 'Fitur Berbagi',
                    text: 'Fitur berbagi tidak didukung pada browser ini. Anda dapat mencetak sertifikat sebagai gantinya.',
                    confirmButtonColor: '#059669'
                });
            }
        }
        
        // ==================== UTILITY FUNCTIONS ====================
        function convertArabicToName(arabicLetter) {
            const mapping = {
                'أَ': 'ALIF',
                'بَ': 'BA',
                'تَ': 'TA',
                'ثَ': 'TSA',
                'جَ': 'JA',
                'حَ': 'HA',
                'خَ': 'KHA',
                'دَ': 'DA',
                'ذَ': 'DZA',
                'رَ': 'RA',
                'زَ': 'ZA',
                'سَ': 'SA',
                'شَ': 'SYA',
                'صَ': 'SHA',
                'ضَ': 'DHA',
                'طَ': 'THA',
                'ظَ': 'ZHA',
                'عَ': 'AIN',
                'غَ': 'GHAIN',
                'فَ': 'FA',
                'قَ': 'QA',
                'كَ': 'KA',
                'لَ': 'LA',
                'مَ': 'MA',
                'نَ': 'NA',
                'وَ': 'WAW',
                'هَ': 'HA',
                'ء': 'HAMZAH',
                'يَ': 'YA'
            };
            
            return mapping[arabicLetter] || arabicLetter;
        }
    </script>
</body>
</html>
